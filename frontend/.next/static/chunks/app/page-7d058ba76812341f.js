(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5278:function(e,t,s){Promise.resolve().then(s.bind(s,4462))},4462:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var r=s(7437),a=s(2265);let n={tripData:null,isLoading:!1,error:null,messages:[]},l=(e,t)=>{switch(t.type){case"SET_TRIP_DATA":return{...e,tripData:t.payload,isLoading:!1,error:null};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload,isLoading:!1};case"ADD_MESSAGE":return{...e,messages:[...e.messages,t.payload]};case"SET_MESSAGES":return{...e,messages:t.payload};default:return e}},i=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,a.useReducer)(l,n);return(0,r.jsx)(i.Provider,{value:{state:s,dispatch:o},children:t})},c=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useTripPlanning must be used within a TripPlanningProvider");return e};var d=s(8158),m=s(2457),u=s(7307),h=s(4059),p=s(8858);let g=e=>{if(!e)return(0,r.jsx)(r.Fragment,{});let t=e.split(/\n\n+/);return(0,r.jsx)(r.Fragment,{children:t.map((e,t)=>{if(e.trim().startsWith("**")&&e.trim().endsWith("**"))return(0,r.jsx)("h3",{className:"text-xl font-bold text-primary-700 mt-6 mb-3",children:e.replace(/\*\*/g,"")},t);if(e.match(/^\d+\./)){let s=e.split(/\n/).filter(e=>e.trim());return(0,r.jsx)("div",{className:"mb-4",children:s.map((e,t)=>{let s=e.match(/^(\d+)\.(.+)/);if(s){let[,e,a]=s;return(0,r.jsxs)("div",{className:"flex items-start mb-3",children:[(0,r.jsx)("div",{className:"bg-primary-100 rounded-full w-8 h-8 flex items-center justify-center text-primary-700 font-bold mr-3 flex-shrink-0",children:e}),(0,r.jsx)("div",{className:"flex-1",children:a.includes("**")?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"font-semibold text-gray-900",children:a.replace(/^\s*\*\*|\*\*\s*:$/g,"")})}):(0,r.jsx)("p",{children:a.trim()})})]},t)}return(0,r.jsx)("p",{className:"ml-11 text-gray-700",children:e},t)})},t)}return e.toLowerCase().includes("งบประมาณ")||e.toLowerCase().includes("บาท")?(0,r.jsxs)("div",{className:"bg-amber-50 border-l-4 border-amber-300 p-4 my-4 rounded-r-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-amber-800 mb-2",children:"\uD83D\uDC67"}),(0,r.jsx)("p",{className:"text-gray-700",children:e})]},t):e.toLowerCase().includes("ข้อควรระวัง")||e.toLowerCase().includes("ข้อควรคำนึง")||e.toLowerCase().includes("หมายเหตุ")?(0,r.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-300 p-4 my-4 rounded-r-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"ข้อควรทราบ"}),(0,r.jsx)("p",{className:"text-gray-700",children:e})]},t):(0,r.jsx)("p",{className:"mb-4 text-gray-700",children:e},t)})})};var x=e=>{let{isPlanning:t}=e,{state:s}=c();(0,a.useEffect)(()=>{var e;console.log("Canvas component state:",{hasTripData:!!s.tripData,isPlanning:t,destination:(null===(e=s.tripData)||void 0===e?void 0:e.destination)||"None",messagesCount:s.messages.length,hasUserMessages:s.messages.some(e=>"user"===e.role),renderWelcomeMessage:n,renderChatOnly:o})},[s.tripData,t,s.messages.length]);let n=!s.tripData&&!t&&(0===s.messages.length||1===s.messages.length&&"assistant"===s.messages[0].role),l=t&&!s.tripData,i=!!s.tripData,o=!n&&!l&&!i;return(0,r.jsx)("div",{className:"h-full overflow-y-auto bg-gradient-to-b from-blue-50 to-white",children:i&&s.tripData&&(0,r.jsx)(p.E.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.3}}},initial:"hidden",animate:"visible",className:"p-8",children:s.messages.some(e=>"assistant"===e.role)&&(0,r.jsx)(p.E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},children:(0,r.jsxs)("div",{className:"mt-10 bg-white rounded-2xl shadow-lg p-8 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary-100 rounded-full -translate-y-1/2 translate-x-1/4 opacity-70"}),(0,r.jsxs)("div",{className:"flex items-center mb-6 relative z-10",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center",children:(0,r.jsx)(d.Z,{className:"w-6 h-6 text-primary-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Travel Plan"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Curated by our AI Travel Assistant"})]})]}),(0,r.jsxs)("div",{className:"prose prose-lg max-w-none relative z-10",children:[(0,r.jsx)("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed custom-ai-content",children:g((()=>{let e=s.messages.filter(e=>"assistant"===e.role);return e.length>0?e[e.length-1].content:""})())}),(0,r.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 flex items-center",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5 text-blue-500 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"สถานที่ท่องเที่ยว"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"แลนด์มาร์คที่น่าสนใจ"})]})]}),(0,r.jsxs)("div",{className:"bg-amber-50 rounded-lg p-4 flex items-center",children:[(0,r.jsx)("div",{className:"mr-3 text-amber-500 font-bold text-xl",children:"฿"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"งบประมาณ"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"แผนการใช้จ่าย"})]})]}),(0,r.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 flex items-center",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5 text-green-500 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"กำหนดการ"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"แผนการเดินทางรายวัน"})]})]}),(0,r.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 flex items-center",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 text-purple-500 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"บริการพิเศษ"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"ข้อมูลเพิ่มเติม"})]})]})]})]})]})})})})},f=s(5083),y=s(5677),b=s(1213),j=s(6509),N=s(9990);class v{connect(){try{let e="".concat(this.backendUrl,"/api/ws/").concat(this.sessionId);this.socket=new WebSocket(e),this.socket.onopen=this.handleOpen.bind(this),this.socket.onmessage=this.handleMessage.bind(this),this.socket.onclose=this.handleClose.bind(this),this.socket.onerror=this.handleError.bind(this)}catch(e){console.error("WebSocket connection error:",e),this.handlers.onError(e)}}disconnect(){this.socket&&(this.socket.close(),this.socket=null),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)}sendMessage(e){this.socket&&this.socket.readyState===WebSocket.OPEN?this.socket.send(e):(console.error("WebSocket is not connected"),this.handlers.onError(Error("WebSocket is not connected")))}handleOpen(e){console.log("WebSocket connection established"),this.reconnectAttempts=0,this.handlers.onOpen&&this.handlers.onOpen()}handleMessage(e){try{let t=JSON.parse(e.data);t.message&&this.handlers.onMessage(t.message),t.turn_complete&&this.handlers.onTurnComplete(),t.interrupted&&this.handlers.onInterrupted&&this.handlers.onInterrupted()}catch(e){console.error("Error processing WebSocket message:",e),this.handlers.onError(e)}}handleClose(e){console.log("WebSocket connection closed: ".concat(e.code," ").concat(e.reason)),1e3!==e.code&&this.attemptReconnect(),this.handlers.onClose&&this.handlers.onClose()}handleError(e){console.error("WebSocket error:",e),this.handlers.onError(e)}attemptReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;let e=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log("Attempting to reconnect in ".concat(e,"ms (attempt ").concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),this.reconnectTimeout=setTimeout(()=>{console.log("Reconnecting... (attempt ".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),this.connect()},e)}else console.error("Maximum reconnect attempts reached"),this.handlers.onError(Error("Maximum reconnect attempts reached"))}constructor(e,t){this.socket=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectTimeout=null,this.sessionId=e,this.handlers=t,this.backendUrl="http://localhost:8000";let s=this.backendUrl.startsWith("https")?"wss":"ws";this.backendUrl=this.backendUrl.replace(/^http(s?):\/\//,"".concat(s,"://"))}}var w=s(5570),S=s(8219),D=e=>{let{onSubmit:t}=e,[s,n]=(0,a.useState)({departure:"",destination:"",startDate:"",endDate:"",budgetRange:"30000"}),l=e=>e.toISOString().split("T")[0];(0,a.useEffect)(()=>{let e=new Date;e.setDate(e.getDate()+7);let t=new Date(e);t.setDate(t.getDate()+5),n(s=>({...s,startDate:l(e),endDate:l(t)}))},[]);let i=e=>{let{name:t,value:s}=e.target;n(e=>({...e,[t]:s}))};return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(s)},className:"bg-white p-4 rounded-lg border border-gray-200 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4"}),"Departure Location"]})}),(0,r.jsx)("input",{type:"text",name:"departure",value:s.departure,onChange:i,placeholder:"e.g., กรุงเทพ",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4"}),"Destination"]})}),(0,r.jsx)("input",{type:"text",name:"destination",value:s.destination,onChange:i,placeholder:"e.g., เชียงใหม่",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.Z,{className:"w-4 h-4"}),"Start Date"]})}),(0,r.jsx)("input",{type:"date",name:"startDate",value:s.startDate,onChange:i,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.Z,{className:"w-4 h-4"}),"End Date"]})}),(0,r.jsx)("input",{type:"date",name:"endDate",value:s.endDate,onChange:i,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(S.Z,{className:"w-4 h-4"}),"Budget Range (THB)"]})}),(0,r.jsxs)("select",{name:"budgetRange",value:s.budgetRange,onChange:i,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"ไม่เกิน ฿15,000 บาท",children:"Budget (฿ - Under ฿15,000)"}),(0,r.jsx)("option",{value:"฿15,000-฿30,000 บาท",children:"Medium (฿฿ - ฿15,000-฿30,000)"}),(0,r.jsx)("option",{value:"฿50,000 บาท",children:"Luxury (฿฿฿ - Above ฿50,000)"})]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-primary-500 text-white py-2 px-4 rounded-lg hover:bg-primary-600 transition-colors font-medium",children:"Plan My Trip"})]})};let T=e=>{let t=(null==e?void 0:e.destination)||"Bangkok",s=(null==e?void 0:e.departure)||"No departure specified";return{destination:t,departure:s,startDate:(null==e?void 0:e.startDate)||"2023-05-10",endDate:(null==e?void 0:e.endDate)||"2023-05-15",budget:(null==e?void 0:e.budgetRange)||"฿30,000"}},E=e=>{try{let t=e.filter(e=>"assistant"===e.role);if(0===t.length)return null;console.log("Looking for trip data in assistant messages:",t.length);let s=/```json\s*({[\s\S]*?})\s*```/;for(let e=t.length-1;e>=0;e--){let r=t[e].content.match(s);if(r&&r[1])try{let e=r[1].trim();console.log("Found JSON data:",e.substring(0,100)+"...");let t=JSON.parse(e);if(t.destination&&(t.activities||t.restaurants||t.flights||t.accommodations))return console.log("Successfully parsed TripData from JSON"),t}catch(e){console.error("Error parsing JSON from message:",e)}}let r=t[t.length-1].content;console.log("Trying to extract trip data from text:",r.substring(0,100)+"...");let a=r.match(/(?:เที่ยว|ไป|ท่องเที่ยว)\s*(?:ที่|ยัง)?\s*([^,\.\n]+)/i);if(a)return T({destination:a[1].trim()});return null}catch(e){return console.error("Error extracting trip data:",e),null}};var A=e=>{let{onPlanningStart:t,onPlanningComplete:s}=e,{dispatch:n,state:l}=c();(0,a.useEffect)(()=>{0===l.messages.length&&n({type:"SET_MESSAGES",payload:[]})},[]);let[i,o]=(0,a.useState)(""),[d,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),[x,w]=(0,a.useState)(null),[S,A]=(0,a.useState)(!1),[k,_]=(0,a.useState)(null),C=(0,a.useRef)(null),P=(0,a.useRef)(null),I=()=>{var e;null===(e=C.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)(()=>{I()},[l.messages]),(0,a.useEffect)(()=>(L(),()=>{O()}),[]),(0,a.useEffect)(()=>()=>{k&&clearTimeout(k)},[k]),(0,a.useEffect)(()=>{if(!S)return;console.log("Planning trip state is active, checking for trip data..."),console.log("Current state of tripData:",l.tripData?"Has Data":"No Data");let e=E(l.messages);e&&(console.log("Setting trip data to context:",e.destination),n({type:"SET_TRIP_DATA",payload:e}),n({type:"SET_LOADING",payload:!1}),s(),A(!1),k&&(clearTimeout(k),_(null)))},[l.messages,S,n,s,l.tripData,k]);let L=()=>{if(P.current)return;h(!0),g(null);let e=Math.random().toString(36).substring(2,15);P.current=new v(e,{onOpen:()=>{m(!0),h(!1),console.log("WebSocket connected")},onMessage:e=>{if(null===x){let t=Date.now().toString();w(t),n({type:"ADD_MESSAGE",payload:{id:t,role:"assistant",content:e,timestamp:new Date}})}else n({type:"SET_MESSAGES",payload:l.messages.map(t=>t.id===x?{...t,content:t.content+e}:t)})},onTurnComplete:()=>{if(w(null),S){console.log("Turn complete, checking messages for trip data");let e=E(l.messages);e&&(console.log("Found trip data after turn completion"),n({type:"SET_TRIP_DATA",payload:e}),n({type:"SET_LOADING",payload:!1}),s(),A(!1))}},onInterrupted:()=>{w(null)},onClose:()=>{m(!1),console.log("WebSocket disconnected")},onError:e=>{g("Connection to the assistant failed. Please try again."),h(!1),m(!1),console.error("WebSocket error:",e)}}),P.current.connect()},O=()=>{P.current&&(P.current.disconnect(),P.current=null,m(!1))},R=async e=>{if(e.preventDefault(),!i.trim())return;if(!d){u||L(),g("Connecting to the assistant. Please try again in a moment.");return}let r=i.toLowerCase().includes("วางแผนการเดินทาง")||i.toLowerCase().includes("ไปเที่ยว")||i.toLowerCase().includes("plan a trip");if(r&&(A(!0),t(),n({type:"SET_LOADING",payload:!0}),k&&clearTimeout(k),_(setTimeout(()=>{console.log("Timer expired, forcing trip data update with sample data"),n({type:"SET_TRIP_DATA",payload:E(l.messages)||T()}),n({type:"SET_LOADING",payload:!1}),s(),A(!1)},1e4))),n({type:"ADD_MESSAGE",payload:{id:Date.now().toString(),role:"user",content:i,timestamp:new Date}}),P.current)try{P.current.sendMessage(i)}catch(e){console.error("Failed to send message:",e),g("Failed to send message. Please try again."),r&&(n({type:"SET_LOADING",payload:!1}),s(),A(!1),k&&(clearTimeout(k),_(null)))}else g("Not connected to the assistant. Please refresh the page."),r&&(n({type:"SET_LOADING",payload:!1}),s(),A(!1),k&&(clearTimeout(k),_(null)));o("")},M=async e=>{if(!d){u||L(),g("Connecting to the assistant. Please try again in a moment.");return}A(!0),t(),n({type:"SET_LOADING",payload:!0}),k&&clearTimeout(k),_(setTimeout(()=>{console.log("Trip input timer expired, forcing update with sample data"),n({type:"SET_TRIP_DATA",payload:T(e)}),n({type:"SET_LOADING",payload:!1}),s(),A(!1)},1e4));let r="ช่วยวางแผนการเดินทางท่องเที่ยวแบบละเอียดที่สุด ตามเงื่อนไขต่อไปนี้ :\n- ต้นทาง: ".concat(e.departure,"\n- ปลายทาง: ").concat(e.destination,"\n- ช่วงเวลาเดินทาง: วันที่: ").concat(e.startDate," ถึงวันที่ ").concat(e.endDate,"\n- งบประมาณรวม: ").concat(e.budgetRange,"\n      \nสิ่งที่ต้องการให้ระบุในแผนการเดินทาง:\n\n      - รายละเอียดการเดินทางไป-กลับ (เช่น รถยนต์, เครื่องบิน, รถทัวร์ พร้อมเวลาเดินทางและราคาค่าโดยสาร)\n\n      - สถานที่ท่องเที่ยวสำคัญที่ควรแวะชมในแต่ละวัน (เน้นสถานที่สำคัญทางวัฒนธรรม ธรรมชาติ และจุดถ่ายรูปยอดนิยม)\n\n      - ที่พักแนะนำ (เน้นที่พักคุณภาพดี ราคาคุ้มค่า ทำเลสะดวก พร้อมราคาต่อคืน)\n\n      - ร้านอาหารแนะนำ (ระบุชื่อร้าน ประเภทอาหาร เมนูเด็ดที่ต้องลอง และราคาคร่าวๆ ต่อมื้อ)\n\n      - กิจกรรมที่น่าสนใจห้ามพลาดใน ").concat(e.destination," (เช่น เที่ยวชมวัด ปั่นจักรยาน วิถีชุมชน ชมวิว ถ่ายภาพ)\n\n      แจกแจงค่าใช้จ่ายแต่ละวันให้ชัดเจน (รวมยอดค่าใช้จ่ายทั้งหมดไม่เกินงบที่ระบุไว้ ").concat(e.budgetRange,") \n\n\n      แนะนำเคล็ดลับหรือข้อควรระวัง เพื่อให้การเดินทางสะดวก ปลอดภัย และประทับใจมากที่สุด\n\n      ขอผลลัพธ์ในรูปแบบที่อ่านเข้าใจง่าย ชัดเจน พร้อมจัดตารางให้ดูสวยงามและใช้งานง่ายที่สุด\n    ");if(n({type:"ADD_MESSAGE",payload:{id:Date.now().toString(),role:"user",content:r,timestamp:new Date}}),P.current)try{P.current.sendMessage(r)}catch(t){console.error("Failed to send trip planning request:",t),g("Failed to send trip planning request. Please try again."),setTimeout(()=>{n({type:"SET_TRIP_DATA",payload:E(l.messages)||T(e)}),n({type:"SET_LOADING",payload:!1}),s(),A(!1)},2e3),k&&(clearTimeout(k),_(null))}else g("Not connected to the assistant. Please refresh the page."),setTimeout(()=>{n({type:"SET_TRIP_DATA",payload:E(l.messages)||T(e)}),n({type:"SET_LOADING",payload:!1}),s(),A(!1)},2e3),k&&(clearTimeout(k),_(null))};return(0,r.jsxs)("div",{className:"h-full flex flex-col bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white border-b border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"AI Chat Assistant"}),u?(0,r.jsxs)("div",{className:"flex items-center text-amber-600 text-sm",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 mr-1 animate-spin"}),(0,r.jsx)("span",{children:"Connecting..."})]}):d?(0,r.jsxs)("div",{className:"flex items-center text-green-600 text-sm",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 mr-1"}),(0,r.jsx)("span",{children:"Connected"})]}):(0,r.jsxs)("div",{className:"flex items-center text-rose-600 text-sm",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 mr-1"}),(0,r.jsx)("span",{children:"Disconnected"})]})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p&&(0,r.jsx)("div",{className:"bg-rose-50 border border-rose-200 rounded-lg p-3 text-rose-600 text-sm",children:p}),(0,r.jsx)(D,{onSubmit:M}),l.messages.map(e=>(0,r.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"flex gap-3 max-w-[80%] ".concat("user"===e.role?"flex-row-reverse":"flex-row"),children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-primary-500":"bg-gray-200"),children:"user"===e.role?(0,r.jsx)(b.Z,{className:"w-5 h-5 text-white"}):(0,r.jsx)(j.Z,{className:"w-5 h-5 text-gray-600"})}),(0,r.jsxs)("div",{className:"rounded-lg px-4 py-2 ".concat("user"===e.role?"bg-primary-500 text-white":"bg-white border border-gray-200"),children:[(0,r.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),(0,r.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.role?"text-primary-200":"text-gray-500"),children:e.timestamp.toLocaleTimeString()})]})]})},e.id)),(0,r.jsx)("div",{ref:C})]}),(0,r.jsx)("form",{onSubmit:R,className:"p-4 bg-white border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,r.jsx)("button",{type:"submit",className:"bg-primary-500 text-white rounded-lg p-2 hover:bg-primary-600 transition-colors",children:(0,r.jsx)(N.Z,{className:"w-5 h-5"})})]})})]})},k=()=>(0,r.jsx)("header",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-primary-500 p-2 rounded-lg",children:(0,r.jsx)(d.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Travel Planner"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"AI-Powered Trip Planning Assistant"})]})]})})}),_=function(){let[e,t]=(0,a.useState)(!1);return(0,r.jsx)(o,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:[(0,r.jsx)(k,{}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 h-[calc(100vh-8rem)]",children:[(0,r.jsx)("div",{className:"lg:col-span-8 bg-white rounded-xl shadow-lg overflow-hidden",children:(0,r.jsx)(x,{isPlanning:e})}),(0,r.jsx)("div",{className:"lg:col-span-4 bg-white rounded-xl shadow-lg overflow-hidden",children:(0,r.jsx)(A,{onPlanningStart:()=>t(!0),onPlanningComplete:()=>t(!1)})})]})})]})})}}},function(e){e.O(0,[83,971,69,744],function(){return e(e.s=5278)}),_N_E=e.O()}]);
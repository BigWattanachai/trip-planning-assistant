(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5278:function(e,t,s){Promise.resolve().then(s.bind(s,243))},243:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return X}});var a=s(7437),r=s(2265);let i={tripData:null,isLoading:!1,error:null,messages:[]},l=(e,t)=>{switch(t.type){case"SET_TRIP_DATA":return{...e,tripData:t.payload,isLoading:!1,error:null};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload,isLoading:!1};case"ADD_MESSAGE":return{...e,messages:[...e.messages,t.payload]};case"SET_MESSAGES":return{...e,messages:t.payload};default:return e}},n=(0,r.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,r.useReducer)(l,i);return(0,a.jsx)(n.Provider,{value:{state:s,dispatch:o},children:t})},c=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useTripPlanning must be used within a TripPlanningProvider");return e};var d=s(2457),m=s(5879),x=s(6490),h=s(7307),p=s(7336),g=s(1708),u=s(8858),b=e=>{let{activities:t}=e,s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}},hover:{y:-10,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",transition:{duration:.3}}};return(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-primary-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Unforgettable Experiences"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Discover handpicked attractions and activities for your journey"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.map((e,t)=>(0,a.jsxs)(u.E.div,{className:"rounded-xl overflow-hidden border border-gray-200 bg-white hover:border-primary-200 transition-all",variants:s,initial:"hidden",animate:"visible",whileHover:"hover",transition:{delay:.1*t},children:[(0,a.jsxs)("div",{className:"relative h-56 overflow-hidden",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover transition-transform duration-700 hover:scale-110"}),(0,a.jsx)("div",{className:"absolute top-4 right-4 bg-white bg-opacity-90 backdrop-blur-sm py-1 px-3 rounded-full",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-yellow-500 fill-current"}),(0,a.jsxs)("span",{className:"ml-1 text-sm font-medium",children:[e.rating,"/5"]})]})}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4",children:[(0,a.jsx)("div",{className:"inline-block bg-primary-600 text-white text-xs px-2 py-1 rounded-md mb-2",children:e.category}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name})]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"prose prose-sm mb-4",children:(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed",children:e.description})}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2 text-primary-500 flex-shrink-0"}),(0,a.jsx)("span",{children:e.openingHours})]}),e.location&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-2 text-primary-500 flex-shrink-0"}),(0,a.jsx)("span",{children:e.location})]}),e.price&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-bold mr-2 text-primary-500 flex-shrink-0",children:"฿"}),(0,a.jsx)("span",{children:e.price})]}),e.bestTimeToVisit&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2 text-primary-500 flex-shrink-0"}),(0,a.jsxs)("span",{children:["Best time: ",e.bestTimeToVisit]})]})]}),e.highlights&&e.highlights.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 mb-2 flex items-center",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-1 text-primary-500"}),"Highlights"]}),(0,a.jsx)("ul",{className:"space-y-1",children:e.highlights.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm text-gray-700 flex items-start",children:[(0,a.jsx)("span",{className:"text-primary-500 mr-2",children:"•"}),e]},t))})]}),(0,a.jsx)("div",{className:"mt-5 pt-4 border-t border-gray-100",children:(0,a.jsxs)("button",{className:"text-primary-600 hover:text-primary-800 text-sm font-medium flex items-center transition-colors",children:["View full details",(0,a.jsx)(g.Z,{className:"w-3.5 h-3.5 ml-1"})]})})]})]},e.id))}),0===t.length&&(0,a.jsx)("div",{className:"text-center py-10 bg-gray-50 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No activities found. Your custom itinerary will appear here."})})]})},f=s(948),y=s(5707),j=e=>{let{restaurants:t}=e,s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}},hover:{y:-10,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",transition:{duration:.3}}};return(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center",children:(0,a.jsx)(f.Z,{className:"w-6 h-6 text-amber-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Culinary Discoveries"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Extraordinary dining experiences tailored to your tastes"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.map((e,t)=>(0,a.jsxs)(u.E.div,{className:"rounded-xl overflow-hidden border border-gray-200 bg-white hover:border-amber-200 transition-all",variants:s,initial:"hidden",animate:"visible",whileHover:"hover",transition:{delay:.1*t},children:[(0,a.jsxs)("div",{className:"relative h-56 overflow-hidden",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover transition-transform duration-700 hover:scale-110"}),(0,a.jsx)("div",{className:"absolute top-4 right-4 bg-white bg-opacity-90 backdrop-blur-sm py-1 px-3 rounded-full",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-yellow-500 fill-current"}),(0,a.jsxs)("span",{className:"ml-1 text-sm font-medium",children:[e.rating,"/5"]})]})}),e.reservationRequired&&(0,a.jsx)("div",{className:"absolute top-4 left-4 bg-red-500 text-white text-xs py-1 px-3 rounded-full",children:"Reservation Required"}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4",children:[(0,a.jsx)("div",{className:"inline-block bg-amber-600 text-white text-xs px-2 py-1 rounded-md mb-2",children:e.cuisine}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name})]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"flex text-amber-600",children:Array.from({length:4}).map((t,s)=>(0,a.jsx)("span",{className:"w-6 h-6 inline-flex items-center justify-center ".concat(s<e.priceRange.length?"opacity-100":"opacity-30"),children:"฿"},s))}),e.location&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-1 text-amber-500"}),(0,a.jsx)("span",{children:e.location})]})]}),(0,a.jsxs)("div",{className:"bg-amber-50 p-4 rounded-lg mb-4 relative",children:[(0,a.jsx)(y.Z,{className:"w-5 h-5 text-amber-500 absolute top-3 left-3"}),(0,a.jsxs)("p",{className:"text-gray-700 text-sm italic pl-8 pr-2",children:['"',e.reviewHighlight,'"']})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.hours&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2 text-amber-500 flex-shrink-0"}),(0,a.jsx)("span",{children:e.hours})]}),e.specialties&&e.specialties.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Signature Dishes:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.specialties.map((e,t)=>(0,a.jsx)("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full",children:e},t))})]})]}),(0,a.jsx)("div",{className:"mt-5 pt-4 border-t border-gray-100",children:(0,a.jsxs)("button",{className:"text-amber-600 hover:text-amber-800 text-sm font-medium flex items-center transition-colors",children:["See menu and reviews",(0,a.jsx)(g.Z,{className:"w-3.5 h-3.5 ml-1"})]})})]})]},e.id))}),0===t.length&&(0,a.jsx)("div",{className:"text-center py-10 bg-gray-50 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No restaurants found. Your dining recommendations will appear here."})})]})},v=s(8158),N=s(7326),w=e=>{let{flights:t}=e;return(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-teal-100 flex items-center justify-center",children:(0,a.jsx)(v.Z,{className:"w-6 h-6 text-teal-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Seamless Sky Travel"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Optimal flight options for your journey based on your preferences"})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:t.map((e,t)=>(0,a.jsx)(u.E.div,{className:"border border-gray-200 rounded-xl overflow-hidden hover:border-teal-200 transition-all bg-white",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t,duration:.5},whileHover:{y:-5,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",transition:{duration:.3}},children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.airlineLogoUrl?(0,a.jsx)("img",{src:e.airlineLogoUrl,alt:e.airline,className:"w-10 h-10 object-contain"}):(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(v.Z,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.airline}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Flight ",e.flightNumber]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-teal-600",children:["฿",e.price.toLocaleString()]}),(0,a.jsx)("div",{className:"inline-block px-2 py-1 bg-teal-50 text-teal-800 text-xs rounded",children:e.class})]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-stretch justify-between mb-6 bg-gray-50 rounded-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 md:p-6 flex-1 border-r border-gray-200",children:[(0,a.jsx)("div",{className:"text-xs uppercase text-gray-500 mb-1",children:"Departure"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:e.departure.time}),(0,a.jsx)("div",{className:"text-sm text-gray-700 font-medium",children:e.departure.airport}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mt-2",children:[(0,a.jsx)(h.Z,{className:"w-3 h-3 mr-1"}),e.departure.date]}),e.departure.terminal&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Terminal: ",e.departure.terminal]})]}),(0,a.jsxs)("div",{className:"py-4 px-6 flex flex-col justify-center items-center",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-600 mb-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.duration})]}),(0,a.jsxs)("div",{className:"relative w-32 md:w-40 h-6 my-2",children:[(0,a.jsx)("div",{className:"absolute top-1/2 left-0 right-0 border-t-2 border-dashed border-gray-300 transform -translate-y-1/2"}),(0,a.jsx)("div",{className:"absolute top-1/2 left-0 w-3 h-3 bg-teal-500 rounded-full transform -translate-x-1/2 -translate-y-1/2"}),(0,a.jsx)("div",{className:"absolute top-1/2 right-0 w-3 h-3 bg-teal-700 rounded-full transform translate-x-1/2 -translate-y-1/2"}),e.stops&&e.stops>0&&(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,a.jsx)("div",{className:"w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs font-bold",children:e.stops})})})]}),e.stops&&e.stops>0?(0,a.jsxs)("div",{className:"text-xs text-amber-600 font-medium flex items-center",children:[e.stops," stop",e.stops>1?"s":"",e.layover&&(0,a.jsxs)("span",{className:"ml-1",children:["• ",e.layover," layover"]})]}):(0,a.jsx)("div",{className:"text-xs text-teal-600 font-medium",children:"Direct flight"})]}),(0,a.jsxs)("div",{className:"p-4 md:p-6 flex-1 border-l border-gray-200",children:[(0,a.jsx)("div",{className:"text-xs uppercase text-gray-500 mb-1",children:"Arrival"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:e.arrival.time}),(0,a.jsx)("div",{className:"text-sm text-gray-700 font-medium",children:e.arrival.airport}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mt-2",children:[(0,a.jsx)(h.Z,{className:"w-3 h-3 mr-1"}),e.arrival.date]}),e.arrival.terminal&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Terminal: ",e.arrival.terminal]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col-reverse md:flex-row justify-between items-center",children:[(0,a.jsxs)("div",{className:"w-full md:w-auto mt-4 md:mt-0",children:[e.amenities&&e.amenities.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Amenities:"}),e.amenities.map((e,t)=>(0,a.jsx)("span",{className:"bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full",children:e},t))]}),e.cancellationPolicy&&(0,a.jsxs)("div",{className:"flex items-center mt-2 text-xs text-gray-600",children:[(0,a.jsx)(N.Z,{className:"w-3 h-3 mr-1 text-teal-500"}),e.cancellationPolicy]})]}),(0,a.jsxs)("a",{href:e.bookingUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors text-sm font-medium",children:["Book this flight",(0,a.jsx)(g.Z,{className:"w-3.5 h-3.5 ml-1"})]})]})]})},e.id))}),0===t.length&&(0,a.jsx)("div",{className:"text-center py-10 bg-gray-50 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No flights found. Your flight options will appear here."})})]})},k=s(3052),T=s(3081),S=s(8814),D=s(7841),E=e=>{let{videos:t}=e,[s,i]=(0,r.useState)(null),l=()=>{i(null)},n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}},hover:{y:-5,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",transition:{duration:.3}}};return(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:(0,a.jsx)(k.Z,{className:"w-6 h-6 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Inspiring Visual Stories"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Immersive video content to help you explore your destination"})]})]}),(0,a.jsx)(u.E.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-8",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},initial:"hidden",animate:"visible",children:t.map((e,t)=>(0,a.jsxs)(u.E.div,{className:"rounded-xl overflow-hidden border border-gray-200 bg-white hover:border-red-200 transition-all",variants:n,whileHover:"hover",children:[s===e.id?(0,a.jsxs)("div",{className:"relative pt-[56.25%] bg-black",children:[(0,a.jsx)("iframe",{src:"".concat(e.embedUrl,"?autoplay=1"),className:"absolute inset-0 w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),(0,a.jsx)("button",{onClick:l,className:"absolute top-3 right-3 bg-black bg-opacity-70 text-white rounded-full p-1",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}):(0,a.jsx)("div",{className:"relative group",children:(0,a.jsxs)("div",{className:"relative h-56 overflow-hidden",children:[(0,a.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-20 group-hover:bg-opacity-30 transition-opacity"}),(0,a.jsx)("button",{onClick:()=>i(e.id),className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-red-600 text-white rounded-full w-14 h-14 flex items-center justify-center group-hover:bg-red-700 transition-colors",children:(0,a.jsx)(T.Z,{className:"w-7 h-7 ml-1",fill:"white"})}),(0,a.jsxs)("div",{className:"absolute bottom-3 right-3 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded-md flex items-center",children:[(0,a.jsx)(x.Z,{className:"w-3 h-3 mr-1"}),e.duration]}),e.tags&&e.tags.length>0&&(0,a.jsx)("div",{className:"absolute top-3 left-3",children:(0,a.jsx)("span",{className:"bg-red-600 text-white text-xs px-2 py-1 rounded-md",children:e.tags[0]})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-1",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-3",children:[e.channel&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mr-4",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4 mr-1 text-gray-400"}),(0,a.jsx)("span",{children:e.channel})]}),e.publishDate&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.publishDate})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(D.Z,{className:"w-4 h-4 mr-1 text-gray-400"}),(0,a.jsx)("span",{children:e.viewCount})]}),e.likes&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-1 text-gray-400"}),(0,a.jsx)("span",{children:e.likes})]})]}),(0,a.jsxs)("a",{href:e.embedUrl,target:"_blank",rel:"noopener noreferrer",className:"text-red-600 hover:text-red-800 text-sm font-medium flex items-center transition-colors",children:["Watch on YouTube",(0,a.jsx)(g.Z,{className:"w-3.5 h-3.5 ml-1"})]})]})]})]},e.id))}),0===t.length&&(0,a.jsx)("div",{className:"text-center py-10 bg-gray-50 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No videos found. Curated video content will appear here."})})]})},A=s(1530),C=s(3571),P=s(5546),Z=s(2845),R=s(5005),M=s(9259);A.Z,C.Z,P.Z,Z.Z;var _=e=>{let{accommodations:t}=e,s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}},hover:{y:-10,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",transition:{duration:.3}}};return(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center",children:(0,a.jsx)(R.Z,{className:"w-6 h-6 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Exceptional Stays"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Carefully selected accommodations for your comfort and convenience"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.map((e,t)=>(0,a.jsxs)(u.E.div,{className:"rounded-xl overflow-hidden border border-gray-200 bg-white hover:border-indigo-200 transition-all",variants:s,initial:"hidden",animate:"visible",whileHover:"hover",transition:{delay:.1*t},children:[(0,a.jsxs)("div",{className:"relative h-56 overflow-hidden",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover transition-transform duration-700 hover:scale-110"}),(0,a.jsx)("div",{className:"absolute top-4 right-4 bg-white bg-opacity-90 backdrop-blur-sm py-1 px-3 rounded-full",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-yellow-500 fill-current"}),(0,a.jsxs)("span",{className:"ml-1 text-sm font-medium",children:[e.rating,"/5"]}),(0,a.jsxs)("span",{className:"ml-1 text-xs text-gray-500",children:["(",e.reviewCount,")"]})]})}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4",children:[(0,a.jsx)("div",{className:"inline-block bg-indigo-600 text-white text-xs px-2 py-1 rounded-md mb-2",children:e.type}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name})]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"text-xl font-bold text-indigo-600",children:["฿",e.price.toLocaleString()]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 ml-1",children:["/",e.priceUnit]})]}),(0,a.jsxs)("div",{className:"inline-flex items-center px-2 py-1 bg-gray-100 rounded text-sm text-gray-700",children:["via ",e.platform]})]}),e.description&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("p",{className:"text-gray-700 text-sm",children:e.description})}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[e.location&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-2 text-indigo-500 flex-shrink-0"}),(0,a.jsx)("span",{children:e.location})]}),e.distance&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4 mr-2 text-indigo-500 flex-shrink-0"}),(0,a.jsxs)("span",{children:[e.distance," from city center"]})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Popular Amenities"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.amenities.slice(0,6).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-700",children:[(0,a.jsx)(M.Z,{className:"w-4 h-4 mr-2 text-indigo-500"}),(0,a.jsx)("span",{children:e})]},t))})]}),(0,a.jsx)("div",{className:"mt-5 pt-4 border-t border-gray-100",children:(0,a.jsxs)("a",{href:e.bookingUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium",children:["Book this stay",(0,a.jsx)(g.Z,{className:"w-3.5 h-3.5 ml-1"})]})})]})]},e.id))}),0===t.length&&(0,a.jsx)("div",{className:"text-center py-10 bg-gray-50 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No accommodations found. Your stay recommendations will appear here."})})]})},I=s(438),U=s(9580),L=s(4059),B=e=>{let{isPlanning:t}=e,{state:s}=c();(0,r.useEffect)(()=>{var e;console.log("Canvas component state:",{hasTripData:!!s.tripData,isPlanning:t,destination:(null===(e=s.tripData)||void 0===e?void 0:e.destination)||"None",messagesCount:s.messages.length,hasUserMessages:s.messages.some(e=>"user"===e.role),renderWelcomeMessage:l,renderChatOnly:d})},[s.tripData,t,s.messages.length]);let i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},l=!s.tripData&&!t&&(0===s.messages.length||1===s.messages.length&&"assistant"===s.messages[0].role),n=t&&!s.tripData,o=!!s.tripData,d=!l&&!n&&!o;return(0,a.jsxs)("div",{className:"h-full overflow-y-auto bg-gradient-to-b from-blue-50 to-white",children:[l&&(0,a.jsx)(u.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-2xl mx-auto px-6",children:[(0,a.jsx)("div",{className:"inline-block p-3 bg-blue-100 rounded-full mb-6",children:(0,a.jsx)(v.Z,{className:"w-10 h-10 text-primary-500"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Welcome to Travel Planner"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8 text-lg",children:"Start planning your perfect trip by providing your travel details xxxxx."}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"Simply use the chat interface on the right to tell us where you want to go, or use the trip input form to provide your destination, dates, and budget."}),(0,a.jsxs)("div",{className:"w-80 h-80 mx-auto relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-blue-500 rounded-full opacity-10 animate-pulse"}),(0,a.jsx)("img",{src:"/travel-illustration.svg",alt:"Travel planning illustration",className:"w-full h-full object-contain relative z-10"})]})]})}),d&&(0,a.jsxs)(u.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},className:"h-full p-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Chat with our Travel Assistant"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"You're chatting with our AI travel assistant. When you're ready to plan a trip, just ask about planning a trip to your desired destination."})]}),s.messages.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)(I.Z,{className:"w-6 h-6 text-primary-500 mr-3"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Chat History"})]}),(0,a.jsx)("div",{className:"space-y-4",children:s.messages.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat("user"===e.role?"bg-primary-50 border-l-4 border-primary-500 ml-8":"bg-gray-50 border-l-4 border-gray-300 mr-8"),children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-2 ".concat("user"===e.role?"bg-primary-500":"bg-gray-500"),children:(0,a.jsx)("span",{className:"text-white text-xs font-bold",children:"user"===e.role?"You":"AI"})}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.content})]},e.id))})]})]}),n&&(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-lg mx-auto p-8 rounded-2xl bg-white shadow-lg",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(U.Z,{className:"w-16 h-16 text-primary-500 animate-spin mx-auto mb-6"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-primary-100 rounded-full opacity-30 scale-150 animate-ping"})]}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Crafting Your Dream Itinerary"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:"Our AI agents are collaborating to design your perfect trip experience..."}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 mt-6",children:[(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-blue-50",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Finding Activities"}),(0,a.jsx)("div",{className:"w-full h-1 bg-gray-200 mt-1 overflow-hidden rounded-full",children:(0,a.jsx)("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-amber-50",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Researching Dining"}),(0,a.jsx)("div",{className:"w-full h-1 bg-gray-200 mt-1 overflow-hidden rounded-full",children:(0,a.jsx)("div",{className:"h-full bg-amber-500 rounded-full animate-pulse",style:{width:"40%"}})})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg bg-green-50",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Planning Routes"}),(0,a.jsx)("div",{className:"w-full h-1 bg-gray-200 mt-1 overflow-hidden rounded-full",children:(0,a.jsx)("div",{className:"h-full bg-green-500 rounded-full animate-pulse",style:{width:"75%"}})})]})]})]})}),o&&s.tripData&&(0,a.jsxs)(u.E.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.3}}},initial:"hidden",animate:"visible",className:"p-8",children:[(0,a.jsxs)(u.E.div,{variants:i,className:"mb-10 bg-white rounded-2xl shadow-lg p-8 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary-100 rounded-full -translate-y-1/2 translate-x-1/4 opacity-70"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("h1",{className:"text-4xl font-extrabold text-gray-900 mb-3",children:["Your Journey to ",s.tripData.destination]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 text-lg text-gray-600 mt-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-primary-500 mr-2"}),(0,a.jsxs)("span",{children:[s.tripData.startDate," to ",s.tripData.endDate]})]}),s.tripData.travelers&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(L.Z,{className:"w-5 h-5 text-primary-500 mr-2"}),(0,a.jsxs)("span",{children:[s.tripData.travelers," travelers"]})]}),s.tripData.budget&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-5 h-5 text-primary-500 mr-2 font-bold",children:"฿"}),(0,a.jsxs)("span",{children:["Budget: ",s.tripData.budget]})]})]}),(0,a.jsxs)("p",{className:"text-lg text-gray-700 leading-relaxed max-w-3xl",children:["Welcome to your personalized travel experience in ",s.tripData.destination,"! We've curated an exceptional itinerary featuring stunning attractions, authentic dining experiences, and comfortable accommodations tailored to your preferences. Explore below to discover the highlights of your upcoming adventure."]})]})]}),(0,a.jsx)(u.E.div,{variants:i,children:(0,a.jsx)(b,{activities:s.tripData.activities})}),(0,a.jsx)(u.E.div,{variants:i,children:(0,a.jsx)(j,{restaurants:s.tripData.restaurants})}),(0,a.jsx)(u.E.div,{variants:i,children:(0,a.jsx)(w,{flights:s.tripData.flights})}),(0,a.jsx)(u.E.div,{variants:i,children:(0,a.jsx)(E,{videos:s.tripData.videos})}),(0,a.jsx)(u.E.div,{variants:i,children:(0,a.jsx)(_,{accommodations:s.tripData.accommodations})}),s.messages.length>0&&(0,a.jsx)(u.E.div,{variants:i,children:(0,a.jsxs)("div",{className:"mt-10 bg-white rounded-2xl shadow-lg p-8",children:[(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)(I.Z,{className:"w-6 h-6 text-primary-500 mr-3"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Chat History"})]}),(0,a.jsx)("div",{className:"space-y-4",children:s.messages.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-lg ".concat("user"===e.role?"bg-primary-50 border-l-4 border-primary-500 ml-8":"bg-gray-50 border-l-4 border-gray-300 mr-8"),children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-2 ".concat("user"===e.role?"bg-primary-500":"bg-gray-500"),children:(0,a.jsx)("span",{className:"text-white text-xs font-bold",children:"user"===e.role?"You":"AI"})}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.content})]},e.id))})]})})]})]})},O=s(5083),G=s(5677),F=s(1213),q=s(6509),W=s(9990);class H{connect(){try{let e="".concat(this.backendUrl,"/api/ws/").concat(this.sessionId);this.socket=new WebSocket(e),this.socket.onopen=this.handleOpen.bind(this),this.socket.onmessage=this.handleMessage.bind(this),this.socket.onclose=this.handleClose.bind(this),this.socket.onerror=this.handleError.bind(this)}catch(e){console.error("WebSocket connection error:",e),this.handlers.onError(e)}}disconnect(){this.socket&&(this.socket.close(),this.socket=null),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)}sendMessage(e){this.socket&&this.socket.readyState===WebSocket.OPEN?this.socket.send(e):(console.error("WebSocket is not connected"),this.handlers.onError(Error("WebSocket is not connected")))}handleOpen(e){console.log("WebSocket connection established"),this.reconnectAttempts=0,this.handlers.onOpen&&this.handlers.onOpen()}handleMessage(e){try{let t=JSON.parse(e.data);t.message&&this.handlers.onMessage(t.message),t.turn_complete&&this.handlers.onTurnComplete(),t.interrupted&&this.handlers.onInterrupted&&this.handlers.onInterrupted()}catch(e){console.error("Error processing WebSocket message:",e),this.handlers.onError(e)}}handleClose(e){console.log("WebSocket connection closed: ".concat(e.code," ").concat(e.reason)),1e3!==e.code&&this.attemptReconnect(),this.handlers.onClose&&this.handlers.onClose()}handleError(e){console.error("WebSocket error:",e),this.handlers.onError(e)}attemptReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;let e=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log("Attempting to reconnect in ".concat(e,"ms (attempt ").concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),this.reconnectTimeout=setTimeout(()=>{console.log("Reconnecting... (attempt ".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),this.connect()},e)}else console.error("Maximum reconnect attempts reached"),this.handlers.onError(Error("Maximum reconnect attempts reached"))}constructor(e,t){this.socket=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectTimeout=null,this.sessionId=e,this.handlers=t,this.backendUrl="http://localhost:8000";let s=this.backendUrl.startsWith("https")?"wss":"ws";this.backendUrl=this.backendUrl.replace(/^http(s?):\/\//,"".concat(s,"://"))}}var Y=s(5570),J=s(8219),K=e=>{let{onSubmit:t}=e,[s,i]=(0,r.useState)({departure:"",destination:"",startDate:"",endDate:"",budgetRange:"medium"}),l=e=>{let{name:t,value:s}=e.target;i(e=>({...e,[t]:s}))};return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(s)},className:"bg-white p-4 rounded-lg border border-gray-200 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Departure Location"]})}),(0,a.jsx)("input",{type:"text",name:"departure",value:s.departure,onChange:l,placeholder:"e.g., San Francisco",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Destination"]})}),(0,a.jsx)("input",{type:"text",name:"destination",value:s.destination,onChange:l,placeholder:"e.g., Bangkok",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Y.Z,{className:"w-4 h-4"}),"Start Date"]})}),(0,a.jsx)("input",{type:"date",name:"startDate",value:s.startDate,onChange:l,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Y.Z,{className:"w-4 h-4"}),"End Date"]})}),(0,a.jsx)("input",{type:"date",name:"endDate",value:s.endDate,onChange:l,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(J.Z,{className:"w-4 h-4"}),"Budget Range (THB)"]})}),(0,a.jsxs)("select",{name:"budgetRange",value:s.budgetRange,onChange:l,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"budget",children:"Budget (฿ - Under ฿35,000)"}),(0,a.jsx)("option",{value:"medium",children:"Medium (฿฿ - ฿35,000-฿105,000)"}),(0,a.jsx)("option",{value:"luxury",children:"Luxury (฿฿฿ - Above ฿105,000)"})]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-primary-500 text-white py-2 px-4 rounded-lg hover:bg-primary-600 transition-colors font-medium",children:"Plan My Trip"})]})};let V=e=>{try{let t=e.filter(e=>"assistant"===e.role);if(0===t.length)return null;console.log("Looking for trip data in assistant messages:",t.length);let s=/```json\s*({[\s\S]*?})\s*```/;for(let e=t.length-1;e>=0;e--){let a=t[e].content.match(s);if(a&&a[1])try{let e=a[1].trim();console.log("Found JSON data:",e.substring(0,100)+"...");let t=JSON.parse(e);if(t.destination&&(t.activities||t.restaurants||t.flights||t.accommodations))return console.log("Successfully parsed TripData from JSON"),t}catch(e){console.error("Error parsing JSON from message:",e)}}let a=t[t.length-1].content;console.log("Trying to extract trip data from text:",a.substring(0,100)+"...");let r=a.match(/(?:เที่ยว|ไป|ท่องเที่ยว)\s*(?:ที่|ยัง)?\s*([^,\.\n]+)/i),i=a.match(/(\d{1,2}[-\/]\d{1,2}[-\/]\d{4})\s*(?:ถึง|to|-)\s*(\d{1,2}[-\/]\d{1,2}[-\/]\d{4})/i),l=a.match(/งบประมาณ\s*(?:ประมาณ)?\s*([^,\.\n]+)(?:บาท|฿)/i),n={destination:r?r[1].trim():"Bangkok",departure:"No departure specified",startDate:i?i[1]:"2023-05-10",endDate:i?i[2]:"2023-05-15",budget:l?l[1]:"฿30,000",travelers:"2",activities:[{id:"1",name:"Grand Palace",description:"The Grand Palace is a complex of buildings at the heart of Bangkok, Thailand. The palace has been the official residence of the Kings of Siam since 1782.",rating:4.8,openingHours:"8:30 AM - 3:30 PM",imageUrl:"https://images.unsplash.com/photo-1563492065599-3520f775eeed?w=800&auto=format&fit=crop&q=60",category:"Cultural",location:"Na Phra Lan Road, Bangkok",price:"฿500 per person",highlights:["Emerald Buddha","Throne Halls","Royal decorations"],bestTimeToVisit:"Early morning"}],restaurants:[{id:"1",name:"Thipsamai Pad Thai",cuisine:"Thai",priceRange:"฿฿",rating:4.7,reviewHighlight:"The best Pad Thai in Bangkok, a must-visit for authentic Thai flavors!",imageUrl:"https://images.unsplash.com/photo-1559314809-0d155014e29e?w=800&auto=format&fit=crop&q=60",location:"Maha Chai Road, Bangkok",hours:"5:00 PM - 2:00 AM",specialties:["Pad Thai","Fresh spring rolls","Orange juice"],reservationRequired:!1},{id:"2",name:"Raan Jay Fai",cuisine:"Thai Street Food",priceRange:"฿฿฿",rating:4.9,reviewHighlight:"Michelin-starred street food that lives up to the hype. The crab omelette is legendary!",imageUrl:"https://images.unsplash.com/photo-1543352634-a1c51d9f1fa7?w=800&auto=format&fit=crop&q=60",location:"Maha Chai Road, Bangkok",hours:"2:00 PM - 12:00 AM",specialties:["Crab omelette","Drunken noodles","Tom Yum"],reservationRequired:!0}],flights:[{id:"1",airline:"Thai Airways",flightNumber:"TG102",departure:{airport:"SFO",time:"23:55",date:"2023-05-10",terminal:"I"},arrival:{airport:"BKK",time:"06:50",date:"2023-05-12",terminal:"M"},duration:"15h 55m",price:29750,class:"Economy",bookingUrl:"https://www.thaiairways.com",stops:1,layover:"2h 30m in Tokyo",amenities:["In-flight meals","Wi-Fi","Entertainment"],cancellationPolicy:"Free cancellation up to 24 hours before departure"}],videos:[{id:"1",title:"Bangkok Travel Guide - Best Things to Do",description:"Complete guide to Bangkok covering temples, markets, food, and nightlife.",thumbnail:"https://images.unsplash.com/photo-1583417319070-4a69db38a482?w=800&auto=format&fit=crop&q=60",embedUrl:"https://www.youtube.com/embed/tO01J-M3g0U",duration:"12:45",viewCount:"250K",likes:"15K",channel:"Travel Guides",publishDate:"2023-01-15"}],accommodations:[{id:"1",name:"The Siam Hotel",type:"Luxury Hotel",rating:4.9,reviewCount:342,price:8750,priceUnit:"night",amenities:["WiFi","Pool","Private Bathroom","Breakfast","Spa","Fitness Center"],imageUrl:"https://images.unsplash.com/photo-1584132967334-10e028bd69f7?w=800&auto=format&fit=crop&q=60",platform:"Agoda",bookingUrl:"https://www.agoda.com",location:"Riverside, Bangkok",description:"An urban luxury resort with exquisite design and personalized service.",distance:"5 km"}]};return console.log("Using sample trip data for testing"),n}catch(e){return console.error("Error extracting trip data:",e),null}};var z=e=>{let{onPlanningStart:t,onPlanningComplete:s}=e,{dispatch:i,state:l}=c();(0,r.useEffect)(()=>{0===l.messages.length&&i({type:"SET_MESSAGES",payload:[{id:"1",role:"assistant",content:"สวัสดีค่ะ! ฉันคือผู้ช่วยวางแผนการเดินทางของคุณ บอกฉันหน่อยว่าคุณอยากไปเที่ยวที่ไหน และมีงบประมาณเท่าไหร่คะ?",timestamp:new Date}]})},[]);let[n,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[u,b]=(0,r.useState)(null),[f,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(null),N=(0,r.useRef)(null),w=(0,r.useRef)(null),k=()=>{var e;null===(e=N.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{k()},[l.messages]),(0,r.useEffect)(()=>(T(),()=>{S()}),[]),(0,r.useEffect)(()=>()=>{j&&clearTimeout(j)},[j]),(0,r.useEffect)(()=>{if(!f)return;console.log("Planning trip state is active, checking for trip data..."),console.log("Current state of tripData:",l.tripData?"Has Data":"No Data");let e=V(l.messages);e&&(console.log("Setting trip data to context:",e.destination),i({type:"SET_TRIP_DATA",payload:e}),i({type:"SET_LOADING",payload:!1}),s(),y(!1),j&&(clearTimeout(j),v(null)))},[l.messages,f,i,s,l.tripData,j]);let T=()=>{if(w.current)return;h(!0),g(null);let e=Math.random().toString(36).substring(2,15);w.current=new H(e,{onOpen:()=>{m(!0),h(!1),console.log("WebSocket connected")},onMessage:e=>{if(null===u){let t=Date.now().toString();b(t),i({type:"ADD_MESSAGE",payload:{id:t,role:"assistant",content:e,timestamp:new Date}})}else i({type:"SET_MESSAGES",payload:l.messages.map(t=>t.id===u?{...t,content:t.content+e}:t)})},onTurnComplete:()=>{if(b(null),f){console.log("Turn complete, checking messages for trip data");let e=V(l.messages);e&&(console.log("Found trip data after turn completion"),i({type:"SET_TRIP_DATA",payload:e}),i({type:"SET_LOADING",payload:!1}),s(),y(!1))}},onInterrupted:()=>{b(null)},onClose:()=>{m(!1),console.log("WebSocket disconnected")},onError:e=>{g("Connection to the assistant failed. Please try again."),h(!1),m(!1),console.error("WebSocket error:",e)}}),w.current.connect()},S=()=>{w.current&&(w.current.disconnect(),w.current=null,m(!1))},D=async e=>{if(e.preventDefault(),!n.trim())return;if(!d){x||T(),g("Connecting to the assistant. Please try again in a moment.");return}let a=n.toLowerCase().includes("วางแผนการเดินทาง")||n.toLowerCase().includes("ไปเที่ยว")||n.toLowerCase().includes("plan a trip");if(a&&(y(!0),t(),i({type:"SET_LOADING",payload:!0}),j&&clearTimeout(j),v(setTimeout(()=>{console.log("Timer expired, forcing trip data update with sample data");let e=V(l.messages);e&&(i({type:"SET_TRIP_DATA",payload:e}),i({type:"SET_LOADING",payload:!1}),s(),y(!1))},1e4))),i({type:"ADD_MESSAGE",payload:{id:Date.now().toString(),role:"user",content:n,timestamp:new Date}}),w.current)try{w.current.sendMessage(n)}catch(e){console.error("Failed to send message:",e),g("Failed to send message. Please try again."),a&&(i({type:"SET_LOADING",payload:!1}),s(),y(!1),j&&(clearTimeout(j),v(null)))}else g("Not connected to the assistant. Please refresh the page."),a&&(i({type:"SET_LOADING",payload:!1}),s(),y(!1),j&&(clearTimeout(j),v(null)));o("")},E=async e=>{if(!d){x||T(),g("Connecting to the assistant. Please try again in a moment.");return}y(!0),t(),i({type:"SET_LOADING",payload:!0}),j&&clearTimeout(j),v(setTimeout(()=>{console.log("Trip input timer expired, forcing update with sample data"),i({type:"SET_TRIP_DATA",payload:{destination:e.destination,departure:e.departure,startDate:e.startDate,endDate:e.endDate,budget:e.budgetRange,travelers:"2",activities:[{id:"1",name:"Grand Palace",description:"The Grand Palace is a complex of buildings at the heart of Bangkok, Thailand. The palace has been the official residence of the Kings of Siam since 1782.",rating:4.8,openingHours:"8:30 AM - 3:30 PM",imageUrl:"https://images.unsplash.com/photo-1563492065599-3520f775eeed?w=800&auto=format&fit=crop&q=60",category:"Cultural",location:"Na Phra Lan Road, Bangkok",price:"฿500 per person",highlights:["Emerald Buddha","Throne Halls","Royal decorations"],bestTimeToVisit:"Early morning"}],restaurants:[{id:"1",name:"Thipsamai Pad Thai",cuisine:"Thai",priceRange:"฿฿",rating:4.7,reviewHighlight:"The best Pad Thai in Bangkok, a must-visit for authentic Thai flavors!",imageUrl:"https://images.unsplash.com/photo-1559314809-0d155014e29e?w=800&auto=format&fit=crop&q=60",location:"Maha Chai Road, Bangkok",hours:"5:00 PM - 2:00 AM",specialties:["Pad Thai","Fresh spring rolls","Orange juice"],reservationRequired:!1},{id:"2",name:"Raan Jay Fai",cuisine:"Thai Street Food",priceRange:"฿฿฿",rating:4.9,reviewHighlight:"Michelin-starred street food that lives up to the hype. The crab omelette is legendary!",imageUrl:"https://images.unsplash.com/photo-1543352634-a1c51d9f1fa7?w=800&auto=format&fit=crop&q=60",location:"Maha Chai Road, Bangkok",hours:"2:00 PM - 12:00 AM",specialties:["Crab omelette","Drunken noodles","Tom Yum"],reservationRequired:!0}],flights:[{id:"1",airline:"Thai Airways",flightNumber:"TG102",departure:{airport:"SFO",time:"23:55",date:e.startDate,terminal:"I"},arrival:{airport:"BKK",time:"06:50",date:e.startDate,terminal:"M"},duration:"15h 55m",price:29750,class:"Economy",bookingUrl:"https://www.thaiairways.com",stops:1,layover:"2h 30m in Tokyo",amenities:["In-flight meals","Wi-Fi","Entertainment"],cancellationPolicy:"Free cancellation up to 24 hours before departure"}],videos:[{id:"1",title:"".concat(e.destination," Travel Guide - Best Things to Do"),description:"Complete guide to ".concat(e.destination," covering temples, markets, food, and nightlife."),thumbnail:"https://images.unsplash.com/photo-1583417319070-4a69db38a482?w=800&auto=format&fit=crop&q=60",embedUrl:"https://www.youtube.com/embed/tO01J-M3g0U",duration:"12:45",viewCount:"250K",likes:"15K",channel:"Travel Guides",publishDate:"2023-01-15"}],accommodations:[{id:"1",name:"Luxury Resort",type:"Luxury Hotel",rating:4.9,reviewCount:342,price:8750,priceUnit:"night",amenities:["WiFi","Pool","Private Bathroom","Breakfast","Spa","Fitness Center"],imageUrl:"https://images.unsplash.com/photo-1584132967334-10e028bd69f7?w=800&auto=format&fit=crop&q=60",platform:"Agoda",bookingUrl:"https://www.agoda.com",location:"Downtown, ".concat(e.destination),description:"An urban luxury resort with exquisite design and personalized service.",distance:"5 km"}]}}),i({type:"SET_LOADING",payload:!1}),s(),y(!1)},1e4));let a="วางแผนการเดินทางให้หน่อย:\n- จาก: ".concat(e.departure,"\n- ไป: ").concat(e.destination,"\n- วันที่: ").concat(e.startDate," ถึง ").concat(e.endDate,"\n- งบประมาณ: ").concat(e.budgetRange);if(i({type:"ADD_MESSAGE",payload:{id:Date.now().toString(),role:"user",content:a,timestamp:new Date}}),w.current)try{w.current.sendMessage(a)}catch(e){console.error("Failed to send trip planning request:",e),g("Failed to send trip planning request. Please try again."),setTimeout(()=>{let e=V(l.messages);e&&i({type:"SET_TRIP_DATA",payload:e}),i({type:"SET_LOADING",payload:!1}),s(),y(!1)},2e3),j&&(clearTimeout(j),v(null))}else g("Not connected to the assistant. Please refresh the page."),setTimeout(()=>{let e=V(l.messages);e&&i({type:"SET_TRIP_DATA",payload:e}),i({type:"SET_LOADING",payload:!1}),s(),y(!1)},2e3),j&&(clearTimeout(j),v(null))};return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"AI Chat Assistant"}),x?(0,a.jsxs)("div",{className:"flex items-center text-amber-600 text-sm",children:[(0,a.jsx)(O.Z,{className:"w-4 h-4 mr-1 animate-spin"}),(0,a.jsx)("span",{children:"Connecting..."})]}):d?(0,a.jsxs)("div",{className:"flex items-center text-green-600 text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 mr-1"}),(0,a.jsx)("span",{children:"Connected"})]}):(0,a.jsxs)("div",{className:"flex items-center text-rose-600 text-sm",children:[(0,a.jsx)(G.Z,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{children:"Disconnected"})]})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p&&(0,a.jsx)("div",{className:"bg-rose-50 border border-rose-200 rounded-lg p-3 text-rose-600 text-sm",children:p}),(0,a.jsx)(K,{onSubmit:E}),l.messages.map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"flex gap-3 max-w-[80%] ".concat("user"===e.role?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-primary-500":"bg-gray-200"),children:"user"===e.role?(0,a.jsx)(F.Z,{className:"w-5 h-5 text-white"}):(0,a.jsx)(q.Z,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsxs)("div",{className:"rounded-lg px-4 py-2 ".concat("user"===e.role?"bg-primary-500 text-white":"bg-white border border-gray-200"),children:[(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),(0,a.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.role?"text-primary-200":"text-gray-500"),children:e.timestamp.toLocaleTimeString()})]})]})},e.id)),(0,a.jsx)("div",{ref:N})]}),(0,a.jsx)("form",{onSubmit:D,className:"p-4 bg-white border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,a.jsx)("button",{type:"submit",className:"bg-primary-500 text-white rounded-lg p-2 hover:bg-primary-600 transition-colors",children:(0,a.jsx)(W.Z,{className:"w-5 h-5"})})]})})]})},Q=()=>(0,a.jsx)("header",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-primary-500 p-2 rounded-lg",children:(0,a.jsx)(v.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Travel Planner"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"AI-Powered Trip Planning Assistant"})]})]})})}),X=function(){let[e,t]=(0,r.useState)(!1);return(0,a.jsx)(o,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:[(0,a.jsx)(Q,{}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 h-[calc(100vh-8rem)]",children:[(0,a.jsx)("div",{className:"lg:col-span-8 bg-white rounded-xl shadow-lg overflow-hidden",children:(0,a.jsx)(B,{isPlanning:e})}),(0,a.jsx)("div",{className:"lg:col-span-4 bg-white rounded-xl shadow-lg overflow-hidden",children:(0,a.jsx)(z,{onPlanningStart:()=>t(!0),onPlanningComplete:()=>t(!1)})})]})})]})})}}},function(e){e.O(0,[915,971,69,744],function(){return e(e.s=5278)}),_N_E=e.O()}]);
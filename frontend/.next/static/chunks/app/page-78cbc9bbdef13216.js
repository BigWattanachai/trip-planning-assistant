(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5278:function(e,t,s){Promise.resolve().then(s.bind(s,9553))},9553:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return I}});var a=s(7437),r=s(2265);let i={tripData:null,isLoading:!1,error:null},n=(e,t)=>{switch(t.type){case"SET_TRIP_DATA":return{...e,tripData:t.payload,isLoading:!1,error:null};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload,isLoading:!1};default:return e}},l=(0,r.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,r.useReducer)(n,i);return(0,a.jsx)(l.Provider,{value:{state:s,dispatch:o},children:t})},c=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useTripPlanning must be used within a TripPlanningProvider");return e};/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),h=(e,t)=>{let s=(0,r.forwardRef)(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:l="",children:o,...c},h)=>(0,r.createElement)("svg",{ref:h,...d,width:a,height:a,stroke:s,strokeWidth:n?24*Number(i)/Number(a):i,className:["lucide",`lucide-${m(e)}`,l].join(" "),...c},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]]));return s.displayName=`${e}`,s},x=h("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),p=h("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),g=h("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var u=e=>{let{activities:t}=e;return(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(x,{className:"w-6 h-6 text-primary-500"}),"Activities & Attractions"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-48 object-cover"}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p,{className:"w-4 h-4 text-yellow-400 fill-current"}),(0,a.jsx)("span",{className:"ml-1 text-sm font-medium text-gray-600",children:e.rating})]})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)(g,{className:"w-4 h-4 mr-1"}),e.openingHours]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("span",{className:"inline-block bg-primary-100 text-primary-800 text-xs px-2 py-1 rounded-full",children:e.category})})]})]},e.id))})]})};/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=h("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);var f=e=>{let{restaurants:t}=e;return(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(y,{className:"w-6 h-6 text-primary-500"}),"Restaurants & Dining"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-48 object-cover"}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p,{className:"w-4 h-4 text-yellow-400 fill-current"}),(0,a.jsx)("span",{className:"ml-1 text-sm font-medium text-gray-600",children:e.rating})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,a.jsx)("span",{className:"inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded",children:e.cuisine}),(0,a.jsx)("div",{className:"flex items-center text-gray-600",children:Array.from({length:4}).map((t,s)=>(0,a.jsx)("span",{className:"w-4 h-4 inline-block text-center ".concat(s<e.priceRange.length?"text-gray-900":"text-gray-300"),children:"฿"},s))})]}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm italic",children:['"',e.reviewHighlight,'"']})]})]},e.id))})]})};/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=h("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),j=h("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var v=e=>{let{flights:t}=e;return(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(b,{className:"w-6 h-6 text-primary-500"}),"Flight Options"]}),(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.airline}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Flight ",e.flightNumber]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-primary-600",children:["฿",e.price]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.class})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.departure.time}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.departure.airport}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.departure.date})]}),(0,a.jsx)("div",{className:"flex-1 mx-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"border-t-2 border-gray-300 w-full"}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white px-2",children:(0,a.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,a.jsx)(g,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{className:"text-sm",children:e.duration})]})})]})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.arrival.time}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.arrival.airport}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.arrival.date})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("a",{href:e.bookingUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 transition-colors flex items-center gap-2",children:["Book Flight",(0,a.jsx)(j,{className:"w-4 h-4"})]})})]},e.id))})]})};/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let N=h("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);var w=e=>{let{videos:t}=e;return(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(N,{className:"w-6 h-6 text-red-500"}),"Travel Videos"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full h-48 object-cover"}),(0,a.jsx)("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded",children:e.duration})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.viewCount," views"]}),(0,a.jsx)("a",{href:e.embedUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary-500 hover:text-primary-600 text-sm font-medium",children:"Watch on YouTube"})]})]})]},e.id))})]})};/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let k=h("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),D=h("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),M=h("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),S=h("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]),A=h("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),C={WiFi:(0,a.jsx)(k,{className:"w-4 h-4"}),Coffee:(0,a.jsx)(D,{className:"w-4 h-4"}),Parking:(0,a.jsx)(M,{className:"w-4 h-4"}),"Private Bathroom":(0,a.jsx)(S,{className:"w-4 h-4"})};var T=e=>{let{accommodations:t}=e;return(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(A,{className:"w-6 h-6 text-primary-500"}),"Accommodations"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-48 object-cover"}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.type})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-primary-600",children:["฿",e.price]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["/",e.priceUnit]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p,{className:"w-4 h-4 text-yellow-400 fill-current"}),(0,a.jsx)("span",{className:"ml-1 text-sm font-medium text-gray-900",children:e.rating})]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["(",e.reviewCount," reviews)"]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.amenities.slice(0,4).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-1 bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs",children:[C[e]||(0,a.jsx)(A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:e})]},t))}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["via ",e.platform]}),(0,a.jsx)("a",{href:e.bookingUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-primary-500 text-white px-4 py-2 rounded-lg hover:bg-primary-600 transition-colors text-sm",children:"View Details"})]})]})]},e.id))})]})};/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let E=h("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var P=e=>{let{isPlanning:t}=e,{state:s}=c();return(0,a.jsxs)("div",{className:"h-full overflow-y-auto",children:[!s.tripData&&!t&&(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Welcome to Travel Planner"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Start planning your perfect trip by providing your travel details."}),(0,a.jsx)("div",{className:"w-64 h-64 mx-auto",children:(0,a.jsx)("img",{src:"/travel-illustration.svg",alt:"Travel planning illustration",className:"w-full h-full object-contain"})})]})}),t&&!s.tripData&&(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(E,{className:"w-12 h-12 text-primary-500 animate-spin mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Planning Your Trip"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Our AI agents are working together to create your perfect itinerary..."})]})}),s.tripData&&(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Your Trip to ",s.tripData.destination]}),(0,a.jsxs)("p",{className:"text-lg text-gray-600 mt-2",children:[s.tripData.startDate," to ",s.tripData.endDate]})]}),(0,a.jsx)(u,{activities:s.tripData.activities}),(0,a.jsx)(f,{restaurants:s.tripData.restaurants}),(0,a.jsx)(v,{flights:s.tripData.flights}),(0,a.jsx)(w,{videos:s.tripData.videos}),(0,a.jsx)(T,{accommodations:s.tripData.accommodations})]})]})};/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let U=h("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),R=h("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),q=h("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),W=h("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),B=h("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);class L{connect(){try{let e="".concat(this.backendUrl,"/api/ws/").concat(this.sessionId);this.socket=new WebSocket(e),this.socket.onopen=this.handleOpen.bind(this),this.socket.onmessage=this.handleMessage.bind(this),this.socket.onclose=this.handleClose.bind(this),this.socket.onerror=this.handleError.bind(this)}catch(e){console.error("WebSocket connection error:",e),this.handlers.onError(e)}}disconnect(){this.socket&&(this.socket.close(),this.socket=null),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)}sendMessage(e){this.socket&&this.socket.readyState===WebSocket.OPEN?this.socket.send(e):(console.error("WebSocket is not connected"),this.handlers.onError(Error("WebSocket is not connected")))}handleOpen(e){console.log("WebSocket connection established"),this.reconnectAttempts=0,this.handlers.onOpen&&this.handlers.onOpen()}handleMessage(e){try{let t=JSON.parse(e.data);t.message&&this.handlers.onMessage(t.message),t.turn_complete&&this.handlers.onTurnComplete(),t.interrupted&&this.handlers.onInterrupted&&this.handlers.onInterrupted()}catch(e){console.error("Error processing WebSocket message:",e),this.handlers.onError(e)}}handleClose(e){console.log("WebSocket connection closed: ".concat(e.code," ").concat(e.reason)),1e3!==e.code&&this.attemptReconnect(),this.handlers.onClose&&this.handlers.onClose()}handleError(e){console.error("WebSocket error:",e),this.handlers.onError(e)}attemptReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;let e=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log("Attempting to reconnect in ".concat(e,"ms (attempt ").concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),this.reconnectTimeout=setTimeout(()=>{console.log("Reconnecting... (attempt ".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),this.connect()},e)}else console.error("Maximum reconnect attempts reached"),this.handlers.onError(Error("Maximum reconnect attempts reached"))}constructor(e,t){this.socket=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectTimeout=null,this.sessionId=e,this.handlers=t,this.backendUrl="http://localhost:8000";let s=this.backendUrl.startsWith("https")?"wss":"ws";this.backendUrl=this.backendUrl.replace(/^http(s?):\/\//,"".concat(s,"://"))}}/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let O=h("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),_=h("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var H=e=>{let{onSubmit:t}=e,[s,i]=(0,r.useState)({departure:"",destination:"",startDate:"",endDate:"",budgetRange:"medium"}),n=e=>{let{name:t,value:s}=e.target;i(e=>({...e,[t]:s}))};return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(s)},className:"bg-white p-4 rounded-lg border border-gray-200 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x,{className:"w-4 h-4"}),"Departure Location"]})}),(0,a.jsx)("input",{type:"text",name:"departure",value:s.departure,onChange:n,placeholder:"e.g., San Francisco",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x,{className:"w-4 h-4"}),"Destination"]})}),(0,a.jsx)("input",{type:"text",name:"destination",value:s.destination,onChange:n,placeholder:"e.g., Bangkok",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(O,{className:"w-4 h-4"}),"Start Date"]})}),(0,a.jsx)("input",{type:"date",name:"startDate",value:s.startDate,onChange:n,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(O,{className:"w-4 h-4"}),"End Date"]})}),(0,a.jsx)("input",{type:"date",name:"endDate",value:s.endDate,onChange:n,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(_,{className:"w-4 h-4"}),"Budget Range (THB)"]})}),(0,a.jsxs)("select",{name:"budgetRange",value:s.budgetRange,onChange:n,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"budget",children:"Budget (฿ - Under ฿35,000)"}),(0,a.jsx)("option",{value:"medium",children:"Medium (฿฿ - ฿35,000-฿105,000)"}),(0,a.jsx)("option",{value:"luxury",children:"Luxury (฿฿฿ - Above ฿105,000)"})]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-primary-500 text-white py-2 px-4 rounded-lg hover:bg-primary-600 transition-colors font-medium",children:"Plan My Trip"})]})},z=e=>{let{onPlanningStart:t,onPlanningComplete:s}=e,[i,n]=(0,r.useState)([{id:"1",role:"assistant",content:"สวัสดีค่ะ! ฉันคือผู้ช่วยวางแผนการเดินทางของคุณ บอกฉันหน่อยว่าคุณอยากไปเที่ยวที่ไหน และมีงบประมาณเท่าไหร่คะ?",timestamp:new Date}]),[l,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[u,y]=(0,r.useState)(null),f=(0,r.useRef)(null),b=(0,r.useRef)(null),{dispatch:j}=c(),v=()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{v()},[i]),(0,r.useEffect)(()=>(N(),()=>{w()}),[]);let N=()=>{if(b.current)return;x(!0),g(null);let e=Math.random().toString(36).substring(2,15);b.current=new L(e,{onOpen:()=>{m(!0),x(!1),console.log("WebSocket connected")},onMessage:e=>{if(null===u){let t=Date.now().toString();y(t),n(s=>[...s,{id:t,role:"assistant",content:e,timestamp:new Date}])}else n(t=>t.map(t=>t.id===u?{...t,content:t.content+e}:t))},onTurnComplete:()=>{y(null)},onInterrupted:()=>{y(null)},onClose:()=>{m(!1),console.log("WebSocket disconnected")},onError:e=>{g("Connection to the assistant failed. Please try again."),x(!1),m(!1),console.error("WebSocket error:",e)}}),b.current.connect()},w=()=>{b.current&&(b.current.disconnect(),b.current=null,m(!1))},k=async e=>{if(e.preventDefault(),!l.trim())return;if(!d){h||N(),g("Connecting to the assistant. Please try again in a moment.");return}let t={id:Date.now().toString(),role:"user",content:l,timestamp:new Date};if(n(e=>[...e,t]),b.current)try{b.current.sendMessage(l)}catch(e){console.error("Failed to send message:",e),g("Failed to send message. Please try again.")}else g("Not connected to the assistant. Please refresh the page.");o("")},D=async e=>{if(!d){h||N(),g("Connecting to the assistant. Please try again in a moment.");return}t(),j({type:"SET_LOADING",payload:!0});let a="วางแผนการเดินทางให้หน่อย:\n- จาก: ".concat(e.departure,"\n- ไป: ").concat(e.destination,"\n- วันที่: ").concat(e.startDate," ถึง ").concat(e.endDate,"\n- งบประมาณ: ").concat(e.budgetRange),r={id:Date.now().toString(),role:"user",content:a,timestamp:new Date};if(n(e=>[...e,r]),b.current)try{b.current.sendMessage(a)}catch(e){console.error("Failed to send trip planning request:",e),g("Failed to send trip planning request. Please try again."),j({type:"SET_LOADING",payload:!1}),s()}else g("Not connected to the assistant. Please refresh the page."),j({type:"SET_LOADING",payload:!1}),s();setTimeout(()=>{j({type:"SET_TRIP_DATA",payload:{destination:e.destination,departure:e.departure,startDate:e.startDate,endDate:e.endDate,budget:e.budgetRange,activities:[{id:"1",name:"วัดพระแก้ว",description:"วัดที่มีชื่อเสียงที่สุดในกรุงเทพฯ เป็นที่ประดิษฐานพระแก้วมรกต",rating:4.8,openingHours:"8:30 AM - 3:30 PM",imageUrl:"https://images.unsplash.com/photo-1563492065599-3520f775eeed?w=800&auto=format&fit=crop&q=60",category:"Cultural"},{id:"2",name:"ตลาดนัดจตุจักร",description:"ตลาดนัดที่ใหญ่ที่สุดในประเทศไทย มีสินค้ามากกว่า 15,000 ร้านค้า",rating:4.5,openingHours:"Sat-Sun: 9:00 AM - 6:00 PM",imageUrl:"https://images.unsplash.com/photo-1577719996642-edf11c65fe76?w=800&auto=format&fit=crop&q=60",category:"Shopping"}],restaurants:[{id:"1",name:"ร้านทิพย์สมัย ผัดไทยประตูผี",cuisine:"Thai",priceRange:"฿฿",rating:4.7,reviewHighlight:"ผัดไทยที่ดีที่สุดในกรุงเทพฯ รสชาติต้นตำรับ",imageUrl:"https://images.unsplash.com/photo-1559314809-0d155014e29e?w=800&auto=format&fit=crop&q=60"},{id:"2",name:"บ้านอาหารเรือนไทย",cuisine:"Thai Fine Dining",priceRange:"฿฿฿",rating:4.6,reviewHighlight:"บรรยากาศสุดคลาสสิก อาหารไทยรสเลิศ",imageUrl:"https://images.unsplash.com/photo-1543352634-a1c51d9f1fa7?w=800&auto=format&fit=crop&q=60"}],flights:[{id:"1",airline:"Thai Airways",flightNumber:"TG102",departure:{airport:"SFO",time:"23:55",date:e.startDate},arrival:{airport:"BKK",time:"06:50+2",date:e.startDate},duration:"15h 55m",price:29750,class:"Economy",bookingUrl:"https://www.thaiairways.com"},{id:"2",airline:"United Airlines",flightNumber:"UA899",departure:{airport:"SFO",time:"10:40",date:e.startDate},arrival:{airport:"BKK",time:"18:30+1",date:e.startDate},duration:"17h 50m",price:25200,class:"Economy",bookingUrl:"https://www.united.com"}],videos:[{id:"1",title:"Bangkok Travel Guide - Best Things to Do",description:"Complete guide to Bangkok covering temples, markets, food, and nightlife.",thumbnail:"https://images.unsplash.com/photo-1583417319070-4a69db38a482?w=800&auto=format&fit=crop&q=60",embedUrl:"https://www.youtube.com/watch?v=example1",duration:"12:45",viewCount:"250K"},{id:"2",title:"Street Food Tour in Bangkok",description:"Discover the best street food in Bangkok with this comprehensive food tour.",thumbnail:"https://images.unsplash.com/photo-1608060434411-0c67dca250bd?w=800&auto=format&fit=crop&q=60",embedUrl:"https://www.youtube.com/watch?v=example2",duration:"15:30",viewCount:"180K"}],accommodations:[{id:"1",name:"The Siam Hotel",type:"Luxury Hotel",rating:4.9,reviewCount:342,price:8750,priceUnit:"night",amenities:["WiFi","Pool","Private Bathroom","Breakfast"],imageUrl:"https://images.unsplash.com/photo-1584132967334-10e028bd69f7?w=800&auto=format&fit=crop&q=60",platform:"Agoda",bookingUrl:"https://www.agoda.com"},{id:"2",name:"Riva Surya Bangkok",type:"Boutique Hotel",rating:4.7,reviewCount:567,price:4200,priceUnit:"night",amenities:["WiFi","River View","Fitness Center","Restaurant"],imageUrl:"https://images.unsplash.com/photo-1581701391032-33cb5e4cff33?w=800&auto=format&fit=crop&q=60",platform:"TripAdvisor",bookingUrl:"https://www.tripadvisor.com"}]}}),j({type:"SET_LOADING",payload:!1}),s()},5e3)};return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"AI Chat Assistant"}),h?(0,a.jsxs)("div",{className:"flex items-center text-amber-600 text-sm",children:[(0,a.jsx)(U,{className:"w-4 h-4 mr-1 animate-spin"}),(0,a.jsx)("span",{children:"Connecting..."})]}):d?(0,a.jsxs)("div",{className:"flex items-center text-green-600 text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 mr-1"}),(0,a.jsx)("span",{children:"Connected"})]}):(0,a.jsxs)("div",{className:"flex items-center text-rose-600 text-sm",children:[(0,a.jsx)(R,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{children:"Disconnected"})]})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p&&(0,a.jsx)("div",{className:"bg-rose-50 border border-rose-200 rounded-lg p-3 text-rose-600 text-sm",children:p}),(0,a.jsx)(H,{onSubmit:D}),i.map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"flex gap-3 max-w-[80%] ".concat("user"===e.role?"flex-row-reverse":"flex-row"),children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-primary-500":"bg-gray-200"),children:"user"===e.role?(0,a.jsx)(q,{className:"w-5 h-5 text-white"}):(0,a.jsx)(W,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsxs)("div",{className:"rounded-lg px-4 py-2 ".concat("user"===e.role?"bg-primary-500 text-white":"bg-white border border-gray-200"),children:[(0,a.jsx)("p",{className:"text-sm",children:e.content}),(0,a.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.role?"text-primary-200":"text-gray-500"),children:e.timestamp.toLocaleTimeString()})]})]})},e.id)),(0,a.jsx)("div",{ref:f})]}),(0,a.jsx)("form",{onSubmit:k,className:"p-4 bg-white border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,a.jsx)("button",{type:"submit",className:"bg-primary-500 text-white rounded-lg p-2 hover:bg-primary-600 transition-colors",children:(0,a.jsx)(B,{className:"w-5 h-5"})})]})})]})},F=()=>(0,a.jsx)("header",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-primary-500 p-2 rounded-lg",children:(0,a.jsx)(b,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Travel Planner"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"AI-Powered Trip Planning Assistant"})]})]})})}),I=function(){let[e,t]=(0,r.useState)(!1);return(0,a.jsx)(o,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50",children:[(0,a.jsx)(F,{}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 h-[calc(100vh-8rem)]",children:[(0,a.jsx)("div",{className:"lg:col-span-8 bg-white rounded-xl shadow-lg overflow-hidden",children:(0,a.jsx)(P,{isPlanning:e})}),(0,a.jsx)("div",{className:"lg:col-span-4 bg-white rounded-xl shadow-lg overflow-hidden",children:(0,a.jsx)(z,{onPlanningStart:()=>t(!0),onPlanningComplete:()=>t(!1)})})]})})]})})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=5278)}),_N_E=e.O()}]);
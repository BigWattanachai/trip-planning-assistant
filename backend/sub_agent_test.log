2025-05-16 11:15:29,892 - agent - INFO - Google Search is available for web search capabilities
2025-05-16 11:15:31,283 - google.adk.models.registry - INFO - Updating LLM class for gemini-.* from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-05-16 11:15:31,283 - google.adk.models.registry - INFO - Updating LLM class for projects\/.+\/locations\/.+\/endpoints\/.+ from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-05-16 11:15:31,283 - google.adk.models.registry - INFO - Updating LLM class for projects\/.+\/locations\/.+\/publishers\/google\/models\/gemini.+ from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-05-16 11:15:31,283 - google.adk.models.registry - INFO - Updating LLM class for gemini-.* from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-05-16 11:15:31,283 - google.adk.models.registry - INFO - Updating LLM class for projects\/.+\/locations\/.+\/endpoints\/.+ from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-05-16 11:15:31,283 - google.adk.models.registry - INFO - Updating LLM class for projects\/.+\/locations\/.+\/publishers\/google\/models\/gemini.+ from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-05-16 11:15:31,428 - agent - INFO - ADK Mode: Using model gemini-2.0-flash
2025-05-16 11:15:31,430 - agent - INFO - Imported simple callbacks using direct imports
2025-05-16 11:15:31,430 - agent - INFO - Google Search is available for use in the ADK
2025-05-16 11:15:31,430 - agent - INFO - Imported root agent prompt using direct import
2025-05-16 11:15:31,431 - sub_agents.accommodation_agent - INFO - Accommodation agent created using simplified pattern
2025-05-16 11:15:31,431 - sub_agents - INFO - Successfully imported AccommodationAgent
2025-05-16 11:15:31,431 - sub_agents.activity_agent - INFO - Activity agent created using simplified pattern
2025-05-16 11:15:31,431 - sub_agents - INFO - Successfully imported ActivityAgent
2025-05-16 11:15:31,431 - sub_agents.restaurant_agent - INFO - Restaurant agent created using simplified pattern
2025-05-16 11:15:31,431 - sub_agents - INFO - Successfully imported RestaurantAgent
2025-05-16 11:15:31,432 - sub_agents.transportation_agent - INFO - Transportation agent created using simplified pattern
2025-05-16 11:15:31,432 - sub_agents - INFO - Successfully imported TransportationAgent
2025-05-16 11:15:31,432 - sub_agents.travel_planner_agent - INFO - Travel planner agent created using simplified pattern with YouTube insights integration
2025-05-16 11:15:31,432 - sub_agents - INFO - Successfully imported TravelPlannerAgent
2025-05-16 11:15:31,433 - root - INFO - Backend initialized in Vertex AI (ADK) mode
2025-05-16 11:15:31,433 - root - INFO - Using model: gemini-2.0-flash
2025-05-16 11:15:31,453 - backend.tools.youtube.youtube - INFO - YouTube API libraries successfully imported
2025-05-16 11:15:31,454 - tools.youtube.youtube - INFO - YouTube API libraries successfully imported
2025-05-16 11:15:31,454 - tools.youtube.youtube_insight - INFO - Successfully imported YouTube functions from tools.youtube.youtube
2025-05-16 11:15:31,454 - backend.tools.youtube.youtube_insight - INFO - Successfully imported YouTube functions from tools.youtube.youtube
2025-05-16 11:15:31,454 - sub_agents.youtube_insight_agent - INFO - Successfully imported YouTube tools from backend.tools.youtube.youtube_insight
2025-05-16 11:15:31,454 - sub_agents.youtube_insight_agent - INFO - YouTube insight agent created using simplified pattern
2025-05-16 11:15:31,454 - sub_agents.youtube_insight_agent - INFO - YouTube Insight Agent module loaded
2025-05-16 11:15:31,454 - sub_agents.youtube_insight_agent - INFO - YouTube API dependencies are available
2025-05-16 11:15:31,454 - sub_agents.youtube_insight_agent - INFO - YouTube tools available and ready to use
2025-05-16 11:15:31,454 - sub_agents.youtube_insight_agent - INFO - YouTube Configuration:
2025-05-16 11:15:31,454 - sub_agents.youtube_insight_agent - INFO -   - YouTube API Key Set: True
2025-05-16 11:15:31,454 - sub_agents.youtube_insight_agent - INFO -   - YouTube Tools Available: True
2025-05-16 11:15:31,454 - sub_agents.youtube_insight_agent - INFO -   - Store State Tool Available: False
2025-05-16 11:15:31,454 - sub_agents.youtube_insight_agent - INFO -   - Timeout Seconds: 30
2025-05-16 11:15:31,454 - sub_agents.youtube_insight_agent - INFO - Testing YouTube API key...
2025-05-16 11:15:31,455 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-05-16 11:15:32,046 - sub_agents.youtube_insight_agent - INFO - YouTube API key is valid and working correctly.
2025-05-16 11:15:32,046 - sub_agents - INFO - Successfully imported YouTubeInsightAgent
2025-05-16 11:15:32,046 - sub_agents - INFO - Imported 6 sub-agents successfully
2025-05-16 11:15:32,046 - agent - INFO - Imported sub-agents using direct import
2025-05-16 11:15:32,047 - agent - INFO - Added accommodation_agent to sub-agents list
2025-05-16 11:15:32,047 - agent - INFO - Added activity_agent to sub-agents list
2025-05-16 11:15:32,047 - agent - INFO - Added restaurant_agent to sub-agents list
2025-05-16 11:15:32,047 - agent - INFO - Added transportation_agent to sub-agents list
2025-05-16 11:15:32,047 - agent - INFO - Added travel_planner_agent to sub-agents list
2025-05-16 11:15:32,047 - agent - INFO - Added youtube_insight_agent to sub-agents list
2025-05-16 11:15:32,047 - agent - INFO - Root agent created with 1 tools (sub-agents disabled for Vertex AI compatibility)
2025-05-16 11:15:32,047 - __main__ - INFO - Starting sub-agent tests
2025-05-16 11:15:32,047 - __main__ - INFO - Testing accommodation agent with query: หาที่พักราคาประหยัดในหัวหิน
2025-05-16 11:15:32,047 - agent - INFO - 🔍 SUB-AGENT REQUEST: accommodation_agent
2025-05-16 11:15:32,047 - agent - INFO - 📄 accommodation_agent request: หาที่พักราคาประหยัดในหัวหิน
2025-05-16 11:15:32,105 - agent - INFO - Extracted travel info: {'origin': 'กรุงเทพ', 'destination': 'ภายในประเทศไทย', 'start_date': 'ไม่ระบุ', 'end_date': 'ไม่ระบุ', 'budget': 'ไม่ระบุ', 'num_travelers': 1, 'preferences': [], 'duration': 'ไม่ระบุ'}
2025-05-16 11:15:32,105 - agent - INFO - 🔍 SUB-AGENT REQUEST: accommodation_agent
2025-05-16 11:15:32,105 - agent - INFO - 📄 accommodation_agent request: คุณคือผู้เชี่ยวชาญด้านที่พัก ให้คำแนะนำที่พักที่เหมาะสมกับความต้องการของผู้ใช้
คำขอ: 
            ฉันกำลังวางแผนเดินทางจาก กรุงเทพ ไป ภายในประเทศไทย
            ในวันที่ ไม่ระบุ ถึง ไม่ระบุ
            มีงบประมาณทั้งหมด ไม่ระบุ บาท

            ช่วยแนะนำที่พักที่เหมาะสมได้ไหม? ต้องการที่พักคุณภาพดี ราคาคุ้มค่า ทำเลสะดวก
            พร้อมราคาต่อคืนที่เหมาะกับงบประมาณ
        

โปรดให้คำแนะนำเกี่ยวกับ:
1. ประเภทที่พัก (โรงแรม, โฮสเทล, รีสอร์ท, เกสต์เฮาส์) ที่ ภายในประเทศไทย
2. ช่วงราคาโดยประมาณต่อ... [truncated]
2025-05-16 11:15:32,105 - agent - INFO - Calling sub-agent: accommodation
2025-05-16 11:15:40,344 - agent - INFO - ✅ SUB-AGENT RESPONSE: accommodation_agent
2025-05-16 11:15:40,344 - agent - INFO - 📄 accommodation_agent response: เพื่อให้คำแนะนำที่พักที่ตรงใจคุณที่สุด ผมต้องการข้อมูลเพิ่มเติมอีกสักหน่อยนะครับ:

*   **งบประมาณ:** คุณมีงบประมาณต่อคืนสำหรับที่พักเท่าไหร่ครับ? (เช่น ไม่เกิน 500 บาท, 500-1,000 บาท, 1,000-2,000 บาท, หรือมากกว่านั้น)
*   **จุดหมายปลายทาง:** คุณต้องการเดินทางไปที่จังหวัด/เมืองไหนในประเทศไทยครับ?
*   **รูปแบบการเดินทาง:** คุณเดินทางคนเดียว, กับเพื่อน, ครอบครัว, หรือคู่รัก? ต้องการบรรยากาศแบบไหน (เช่น เงียบสงบ, คึกคัก, โรแมนติก)?
*   **ความสนใจ:** คุณสนใจกิจกรรมอะไรเป็นพิเศษ (เช่น เที่ยวทะเล, ชมธร... [truncated]
2025-05-16 11:15:40,344 - agent - INFO - Sub-agent accommodation response generated
2025-05-16 11:15:40,344 - agent - INFO - ✅ SUB-AGENT RESPONSE: accommodation_agent
2025-05-16 11:15:40,344 - agent - INFO - 📄 accommodation_agent response: เพื่อให้คำแนะนำที่พักที่ตรงใจคุณที่สุด ผมต้องการข้อมูลเพิ่มเติมอีกสักหน่อยนะครับ:

*   **งบประมาณ:** คุณมีงบประมาณต่อคืนสำหรับที่พักเท่าไหร่ครับ? (เช่น ไม่เกิน 500 บาท, 500-1,000 บาท, 1,000-2,000 บาท, หรือมากกว่านั้น)
*   **จุดหมายปลายทาง:** คุณต้องการเดินทางไปที่จังหวัด/เมืองไหนในประเทศไทยครับ?
*   **รูปแบบการเดินทาง:** คุณเดินทางคนเดียว, กับเพื่อน, ครอบครัว, หรือคู่รัก? ต้องการบรรยากาศแบบไหน (เช่น เงียบสงบ, คึกคัก, โรแมนติก)?
*   **ความสนใจ:** คุณสนใจกิจกรรมอะไรเป็นพิเศษ (เช่น เที่ยวทะเล, ชมธร... [truncated]
2025-05-16 11:15:40,345 - __main__ - INFO - Sub-agent accommodation test completed successfully
2025-05-16 11:15:40,345 - __main__ - INFO - Testing activity agent with query: แนะนำสถานที่ท่องเที่ยวในหัวหิน
2025-05-16 11:15:40,345 - agent - INFO - 🔍 SUB-AGENT REQUEST: activity_agent
2025-05-16 11:15:40,345 - agent - INFO - 📄 activity_agent request: แนะนำสถานที่ท่องเที่ยวในหัวหิน
2025-05-16 11:15:40,345 - agent - INFO - Extracted travel info: {'origin': 'กรุงเทพ', 'destination': 'ภายในประเทศไทย', 'start_date': 'ไม่ระบุ', 'end_date': 'ไม่ระบุ', 'budget': 'ไม่ระบุ', 'num_travelers': 1, 'preferences': [], 'duration': 'ไม่ระบุ'}
2025-05-16 11:15:40,345 - agent - INFO - 🔍 SUB-AGENT REQUEST: activity_agent
2025-05-16 11:15:40,345 - agent - INFO - 📄 activity_agent request: คุณคือผู้เชี่ยวชาญด้านกิจกรรมและสถานที่ท่องเที่ยว ให้คำแนะนำเกี่ยวกับกิจกรรมที่น่าสนใจตามความต้องการของผู้ใช้
คำขอ: 
            ฉันกำลังวางแผนเดินทางไป ภายในประเทศไทย
            ในวันที่ ไม่ระบุ ถึง ไม่ระบุ
            มีงบประมาณทั้งหมด ไม่ระบุ บาท

            ช่วยแนะนำสถานที่ท่องเที่ยวสำคัญและกิจกรรมที่น่าสนใจได้ไหม?
            ต้องการเน้นสถานที่สำคัญทางวัฒนธรรม ธรรมชาติ และจุดถ่ายรูปยอดนิยม
        

โปรดให้คำแนะนำเกี่ยวกับกิจกรรมและสถานที่ท่องเที่ยวที่ ภายในประเทศไทย โดยครอบคลุม:
1. สถานท... [truncated]
2025-05-16 11:15:40,345 - agent - INFO - Calling sub-agent: activity
2025-05-16 11:15:52,221 - agent - INFO - ✅ SUB-AGENT RESPONSE: activity_agent
2025-05-16 11:15:52,222 - agent - INFO - 📄 activity_agent response: เพื่อให้คำแนะนำที่ตรงกับความต้องการของคุณมากที่สุด ผมขอข้อมูลเพิ่มเติมเล็กน้อยนะครับ:

*   **ช่วงเวลาที่ต้องการเดินทาง:** (เช่น ต้นปี, กลางปี, ปลายปี) เพื่อพิจารณาเรื่องสภาพอากาศและเทศกาล
*   **จังหวัดหรือภูมิภาคที่สนใจเป็นพิเศษ:** (เช่น ภาคเหนือ, ภาคใต้, ภาคกลาง, ภาคอีสาน) หรือสนใจเที่ยวทั่วประเทศ
*   **สไตล์การเดินทางที่ชอบ:** (เช่น ผจญภัย, พักผ่อน, เรียนรู้วัฒนธรรม, ถ่ายรูป)
*   **จำนวนวันที่ต้องการเดินทาง:** (เช่น 3 วัน 2 คืน, 5 วัน 4 คืน, 7 วัน 6 คืน)

อย่างไรก็ตาม ผมจะให้คำแนะนำเบื้องต้นเก... [truncated]
2025-05-16 11:15:52,222 - agent - INFO - Sub-agent activity response generated
2025-05-16 11:15:52,223 - agent - INFO - ✅ SUB-AGENT RESPONSE: activity_agent
2025-05-16 11:15:52,223 - agent - INFO - 📄 activity_agent response: เพื่อให้คำแนะนำที่ตรงกับความต้องการของคุณมากที่สุด ผมขอข้อมูลเพิ่มเติมเล็กน้อยนะครับ:

*   **ช่วงเวลาที่ต้องการเดินทาง:** (เช่น ต้นปี, กลางปี, ปลายปี) เพื่อพิจารณาเรื่องสภาพอากาศและเทศกาล
*   **จังหวัดหรือภูมิภาคที่สนใจเป็นพิเศษ:** (เช่น ภาคเหนือ, ภาคใต้, ภาคกลาง, ภาคอีสาน) หรือสนใจเที่ยวทั่วประเทศ
*   **สไตล์การเดินทางที่ชอบ:** (เช่น ผจญภัย, พักผ่อน, เรียนรู้วัฒนธรรม, ถ่ายรูป)
*   **จำนวนวันที่ต้องการเดินทาง:** (เช่น 3 วัน 2 คืน, 5 วัน 4 คืน, 7 วัน 6 คืน)

อย่างไรก็ตาม ผมจะให้คำแนะนำเบื้องต้นเก... [truncated]
2025-05-16 11:15:52,224 - __main__ - INFO - Sub-agent activity test completed successfully
2025-05-16 11:15:52,224 - __main__ - INFO - Testing restaurant agent with query: ร้านอาหารอร่อยในหัวหิน
2025-05-16 11:15:52,224 - agent - INFO - 🔍 SUB-AGENT REQUEST: restaurant_agent
2025-05-16 11:15:52,224 - agent - INFO - 📄 restaurant_agent request: ร้านอาหารอร่อยในหัวหิน
2025-05-16 11:15:52,224 - agent - INFO - Extracted travel info: {'origin': 'กรุงเทพ', 'destination': 'ภายในประเทศไทย', 'start_date': 'ไม่ระบุ', 'end_date': 'ไม่ระบุ', 'budget': 'ไม่ระบุ', 'num_travelers': 1, 'preferences': [], 'duration': 'ไม่ระบุ'}
2025-05-16 11:15:52,225 - agent - INFO - 🔍 SUB-AGENT REQUEST: restaurant_agent
2025-05-16 11:15:52,225 - agent - INFO - 📄 restaurant_agent request: คุณคือผู้เชี่ยวชาญด้านอาหารและร้านอาหาร ให้คำแนะนำร้านอาหารตามความต้องการของผู้ใช้
คำขอ: 
            ฉันกำลังวางแผนเดินทางไป ภายในประเทศไทย
            ในวันที่ ไม่ระบุ ถึง ไม่ระบุ
            มีงบประมาณทั้งหมด ไม่ระบุ บาท

            ช่วยแนะนำร้านอาหารอร่อยที่ ภายในประเทศไทย ได้ไหม?
            ต้องการทราบชื่อร้าน ประเภทอาหาร เมนูเด็ดที่ต้องลอง และราคาคร่าวๆ ต่อมื้อ
            อยากได้หลากหลายราคาทั้งแบบประหยัดและร้านดังๆ
        

โปรดให้คำแนะนำเกี่ยวกับร้านอาหารที่ ภายในประเทศไทย โดยครอบคลุ... [truncated]
2025-05-16 11:15:52,227 - agent - INFO - Calling sub-agent: restaurant
2025-05-16 11:16:00,315 - agent - INFO - ✅ SUB-AGENT RESPONSE: restaurant_agent
2025-05-16 11:16:00,316 - agent - INFO - 📄 restaurant_agent response: แน่นอนครับ! ประเทศไทยเป็นสวรรค์ของนักชิม มีร้านอาหารอร่อยๆ มากมายให้เลือกสรร ผมจะแนะนำร้านอาหารหลากหลายประเภทในประเทศไทย เพื่อให้คุณได้สัมผัสประสบการณ์การรับประทานอาหารที่น่าจดจำครับ

**1. อาหารท้องถิ่นที่ห้ามพลาดและร้านที่ขึ้นชื่อ:**

*   **ร้านเจ๊ไฝ (กรุงเทพฯ):** อาหารไทยสไตล์สตรีทฟู้ดระดับมิชลินสตาร์ ต้องลองเมนูเด็ดอย่าง "ไข่เจียวปู" ราคาค่อนข้างสูง (800-1,500 บาทต่อจาน) แต่คุ้มค่ากับรสชาติที่เป็นเอกลักษณ์
*   **ร้านครัวอัปษร (กรุงเทพฯ):** อาหารไทยโบราณ รสชาติต้นตำรับ แนะนำ "ปลาทูซาเตี๊ยะ" แล... [truncated]
2025-05-16 11:16:00,316 - agent - INFO - Sub-agent restaurant response generated
2025-05-16 11:16:00,316 - agent - INFO - ✅ SUB-AGENT RESPONSE: restaurant_agent
2025-05-16 11:16:00,316 - agent - INFO - 📄 restaurant_agent response: แน่นอนครับ! ประเทศไทยเป็นสวรรค์ของนักชิม มีร้านอาหารอร่อยๆ มากมายให้เลือกสรร ผมจะแนะนำร้านอาหารหลากหลายประเภทในประเทศไทย เพื่อให้คุณได้สัมผัสประสบการณ์การรับประทานอาหารที่น่าจดจำครับ

**1. อาหารท้องถิ่นที่ห้ามพลาดและร้านที่ขึ้นชื่อ:**

*   **ร้านเจ๊ไฝ (กรุงเทพฯ):** อาหารไทยสไตล์สตรีทฟู้ดระดับมิชลินสตาร์ ต้องลองเมนูเด็ดอย่าง "ไข่เจียวปู" ราคาค่อนข้างสูง (800-1,500 บาทต่อจาน) แต่คุ้มค่ากับรสชาติที่เป็นเอกลักษณ์
*   **ร้านครัวอัปษร (กรุงเทพฯ):** อาหารไทยโบราณ รสชาติต้นตำรับ แนะนำ "ปลาทูซาเตี๊ยะ" แล... [truncated]
2025-05-16 11:16:00,316 - __main__ - INFO - Sub-agent restaurant test completed successfully
2025-05-16 11:16:00,316 - __main__ - INFO - Testing transportation agent with query: วิธีเดินทางจากกรุงเทพไปหัวหิน
2025-05-16 11:16:00,316 - agent - INFO - 🔍 SUB-AGENT REQUEST: transportation_agent
2025-05-16 11:16:00,316 - agent - INFO - 📄 transportation_agent request: วิธีเดินทางจากกรุงเทพไปหัวหิน
2025-05-16 11:16:00,317 - agent - INFO - Extracted travel info: {'origin': 'กรุงเทพ', 'destination': 'ภายในประเทศไทย', 'start_date': 'ไม่ระบุ', 'end_date': 'ไม่ระบุ', 'budget': 'ไม่ระบุ', 'num_travelers': 1, 'preferences': [], 'duration': 'ไม่ระบุ'}
2025-05-16 11:16:00,317 - agent - INFO - 🔍 SUB-AGENT REQUEST: transportation_agent
2025-05-16 11:16:00,317 - agent - INFO - 📄 transportation_agent request: คุณคือผู้เชี่ยวชาญด้านการเดินทาง ให้คำแนะนำเกี่ยวกับการเดินทางตามความต้องการของผู้ใช้
คำขอ: 
            ฉันกำลังวางแผนเดินทางจาก กรุงเทพ ไป ภายในประเทศไทย
            ในวันที่ ไม่ระบุ และกลับในวันที่ ไม่ระบุ
            มีงบประมาณทั้งหมด ไม่ระบุ บาท

            ช่วยแนะนำวิธีการเดินทางไป-กลับระหว่าง กรุงเทพ และ ภายในประเทศไทย ได้ไหม?
            ต้องการทราบตัวเลือกการเดินทาง เช่น รถยนต์ เครื่องบิน รถทัวร์ พร้อมเวลาเดินทางและราคาค่าโดยสาร
            รวมทั้งวิธีเดินทางในพื้นที่ ภายในประเทศไทย
  ... [truncated]
2025-05-16 11:16:00,317 - agent - INFO - Calling sub-agent: transportation
2025-05-16 11:16:09,734 - agent - INFO - ✅ SUB-AGENT RESPONSE: transportation_agent
2025-05-16 11:16:09,735 - agent - INFO - 📄 transportation_agent response: เพื่อให้คำแนะนำที่ตรงกับความต้องการของคุณมากที่สุด ผมขอข้อมูลเพิ่มเติมสักเล็กน้อยนะครับ:

1.  **จุดหมายปลายทาง:** "ภายในประเทศไทย" กว้างเกินไปครับ คุณต้องการเดินทางไปที่จังหวัดหรือเมืองใดโดยเฉพาะ? (เช่น เชียงใหม่, ภูเก็ต, กระบี่, อยุธยา, ฯลฯ)
2.  **งบประมาณ:** แม้ว่าคุณจะระบุว่า "ไม่ระบุ" แต่การมีช่วงงบประมาณคร่าวๆ จะช่วยให้ผมแนะนำตัวเลือกที่เหมาะสมได้ดียิ่งขึ้น (เช่น งบประมาณจำกัด, งบประมาณปานกลาง, เน้นความสะดวกสบายมากกว่าราคา)
3.  **ความชอบในการเดินทาง:** คุณชอบการเดินทางแบบไหน? (เช่น ชอบความร... [truncated]
2025-05-16 11:16:09,735 - agent - INFO - Sub-agent transportation response generated
2025-05-16 11:16:09,735 - agent - INFO - ✅ SUB-AGENT RESPONSE: transportation_agent
2025-05-16 11:16:09,735 - agent - INFO - 📄 transportation_agent response: เพื่อให้คำแนะนำที่ตรงกับความต้องการของคุณมากที่สุด ผมขอข้อมูลเพิ่มเติมสักเล็กน้อยนะครับ:

1.  **จุดหมายปลายทาง:** "ภายในประเทศไทย" กว้างเกินไปครับ คุณต้องการเดินทางไปที่จังหวัดหรือเมืองใดโดยเฉพาะ? (เช่น เชียงใหม่, ภูเก็ต, กระบี่, อยุธยา, ฯลฯ)
2.  **งบประมาณ:** แม้ว่าคุณจะระบุว่า "ไม่ระบุ" แต่การมีช่วงงบประมาณคร่าวๆ จะช่วยให้ผมแนะนำตัวเลือกที่เหมาะสมได้ดียิ่งขึ้น (เช่น งบประมาณจำกัด, งบประมาณปานกลาง, เน้นความสะดวกสบายมากกว่าราคา)
3.  **ความชอบในการเดินทาง:** คุณชอบการเดินทางแบบไหน? (เช่น ชอบความร... [truncated]
2025-05-16 11:16:09,735 - __main__ - INFO - Sub-agent transportation test completed successfully
2025-05-16 11:16:09,735 - __main__ - INFO - Testing travel_planner agent with query: วางแผนท่องเที่ยวหัวหิน 3 วัน
2025-05-16 11:16:09,735 - agent - INFO - 🔍 SUB-AGENT REQUEST: travel_planner_agent
2025-05-16 11:16:09,735 - agent - INFO - 📄 travel_planner_agent request: วางแผนท่องเที่ยวหัวหิน 3 วัน
2025-05-16 11:16:09,735 - agent - INFO - Extracted travel info: {'origin': 'กรุงเทพ', 'destination': 'ภายในประเทศไทย', 'start_date': 'ไม่ระบุ', 'end_date': 'ไม่ระบุ', 'budget': 'ไม่ระบุ', 'num_travelers': 1, 'preferences': [], 'duration': 'ไม่ระบุ'}
2025-05-16 11:16:09,736 - agent - INFO - 🔍 SUB-AGENT REQUEST: travel_planner_agent
2025-05-16 11:16:09,736 - agent - INFO - 📄 travel_planner_agent request: คุณคือผู้วางแผนการเดินทางผู้เชี่ยวชาญ สร้างแผนการเดินทางแบบครบวงจร
คำขอ: วางแผนท่องเที่ยวหัวหิน 3 วัน

หลังจากวิเคราะห์คำขอของผู้ใช้ โปรดสร้างแผนการเดินทางจาก กรุงเทพ ไป ภายในประเทศไทย
ในวันที่ ไม่ระบุ ถึง ไม่ระบุ โดยมีงบประมาณ ไม่ระบุ บาท

แผนการเดินทางต้องครอบคลุม:
1. การเดินทางไป-กลับ ระหว่าง กรุงเทพ และ ภายในประเทศไทย
   (เลือกวิธีที่ดีที่สุดทั้งด้านราคาและความสะดวก)
2. ที่พักตลอดการเดินทาง (เลือกที่พักที่เหมาะสมกับงบประมาณ แต่มีคุณภาพดี)
3. สถานที่ท่องเที่ยวและกิจกรรมในแต่ละวัน จัดเรียงตามค... [truncated]
2025-05-16 11:16:09,736 - agent - INFO - Calling sub-agent: travel_planner
2025-05-16 11:16:21,096 - agent - INFO - ✅ SUB-AGENT RESPONSE: travel_planner_agent
2025-05-16 11:16:21,097 - agent - INFO - 📄 travel_planner_agent response: เนื่องจากข้อมูลที่ได้รับมาไม่ระบุวันเดินทาง งบประมาณ และความชอบส่วนตัวของผู้เดินทาง แผนการเดินทางนี้จึงเป็นเพียงตัวอย่างที่สามารถปรับเปลี่ยนได้ตามความเหมาะสม

**===== แผนการเดินทางของคุณ: หัวหิน 3 วัน 2 คืน (ฉบับปรับได้) =====**

**ภาพรวม:** แผนการเดินทางนี้เน้นการสัมผัสประสบการณ์ที่หลากหลายในหัวหิน ทั้งชายหาด ตลาดโต้รุ่ง สถานที่ทางประวัติศาสตร์ และร้านอาหารอร่อย โดยเน้นความสะดวกสบายในการเดินทางและที่พักที่คุ้มค่า

**1. การเดินทางไป-กลับ กรุงเทพฯ - หัวหิน:**

*   **ขาไป:** รถตู้โดยสารจากสถานีขนส... [truncated]
2025-05-16 11:16:21,097 - agent - INFO - Sub-agent travel_planner response generated
2025-05-16 11:16:21,097 - agent - INFO - ✅ SUB-AGENT RESPONSE: travel_planner_agent
2025-05-16 11:16:21,097 - agent - INFO - 📄 travel_planner_agent response: เนื่องจากข้อมูลที่ได้รับมาไม่ระบุวันเดินทาง งบประมาณ และความชอบส่วนตัวของผู้เดินทาง แผนการเดินทางนี้จึงเป็นเพียงตัวอย่างที่สามารถปรับเปลี่ยนได้ตามความเหมาะสม

**===== แผนการเดินทางของคุณ: หัวหิน 3 วัน 2 คืน (ฉบับปรับได้) =====**

**ภาพรวม:** แผนการเดินทางนี้เน้นการสัมผัสประสบการณ์ที่หลากหลายในหัวหิน ทั้งชายหาด ตลาดโต้รุ่ง สถานที่ทางประวัติศาสตร์ และร้านอาหารอร่อย โดยเน้นความสะดวกสบายในการเดินทางและที่พักที่คุ้มค่า

**1. การเดินทางไป-กลับ กรุงเทพฯ - หัวหิน:**

*   **ขาไป:** รถตู้โดยสารจากสถานีขนส... [truncated]
2025-05-16 11:16:21,098 - __main__ - INFO - Sub-agent travel_planner test completed successfully
2025-05-16 11:16:21,098 - __main__ - INFO - Testing youtube_insight agent with query: วิดีโอแนะนำการท่องเที่ยวหัวหิน
2025-05-16 11:16:21,098 - agent - INFO - 🔍 SUB-AGENT REQUEST: youtube_insight_agent
2025-05-16 11:16:21,098 - agent - INFO - 📄 youtube_insight_agent request: วิดีโอแนะนำการท่องเที่ยวหัวหิน
2025-05-16 11:16:21,098 - agent - INFO - Extracted travel info: {'origin': 'กรุงเทพ', 'destination': 'ภายในประเทศไทย', 'start_date': 'ไม่ระบุ', 'end_date': 'ไม่ระบุ', 'budget': 'ไม่ระบุ', 'num_travelers': 1, 'preferences': [], 'duration': 'ไม่ระบุ'}
2025-05-16 11:16:21,098 - agent - INFO - 🔍 SUB-AGENT REQUEST: youtube_insight_agent
2025-05-16 11:16:21,098 - agent - INFO - 📄 youtube_insight_agent request: คุณคือผู้เชี่ยวชาญด้านการวิเคราะห์เนื้อหาท่องเที่ยวจาก YouTube ช่วยวิเคราะห์วิดีโอและให้ข้อมูลเชิงลึกสำหรับนักท่องเที่ยว
คำขอ: 
            ฉันต้องการข้อมูลเชิงลึกเกี่ยวกับการท่องเที่ยวที่ ภายในประเทศไทย จากวิดีโอ YouTube

            ช่วยวิเคราะห์วิดีโอท่องเที่ยวเกี่ยวกับ ภายในประเทศไทย และให้ข้อมูลเกี่ยวกับ:
            1. สถานที่ท่องเที่ยวยอดนิยมที่ถูกกล่าวถึงบ่อยในวิดีโอ
            2. กิจกรรมท่องเที่ยวที่ถูกแนะนำโดย YouTuber ท่องเที่ยว
            3. ข้อมูลความรู้สึกทั่วไปเกี่ยวกับจุดหมายปล... [truncated]
2025-05-16 11:16:21,098 - agent - INFO - Calling sub-agent: youtube_insight
2025-05-16 11:16:21,100 - backend.sub_agents.accommodation_agent - INFO - Accommodation agent created using simplified pattern
2025-05-16 11:16:21,100 - backend.sub_agents - INFO - Successfully imported AccommodationAgent
2025-05-16 11:16:21,100 - backend.sub_agents.activity_agent - INFO - Activity agent created using simplified pattern
2025-05-16 11:16:21,100 - backend.sub_agents - INFO - Successfully imported ActivityAgent
2025-05-16 11:16:21,100 - backend.sub_agents.restaurant_agent - INFO - Restaurant agent created using simplified pattern
2025-05-16 11:16:21,101 - backend.sub_agents - INFO - Successfully imported RestaurantAgent
2025-05-16 11:16:21,101 - backend.sub_agents.transportation_agent - INFO - Transportation agent created using simplified pattern
2025-05-16 11:16:21,101 - backend.sub_agents - INFO - Successfully imported TransportationAgent
2025-05-16 11:16:21,101 - backend.sub_agents.travel_planner_agent - INFO - Travel planner agent created using simplified pattern with YouTube insights integration
2025-05-16 11:16:21,101 - backend.sub_agents - INFO - Successfully imported TravelPlannerAgent
2025-05-16 11:16:21,102 - backend.sub_agents.youtube_insight_agent - INFO - Successfully imported YouTube tools from backend.tools.youtube.youtube_insight
2025-05-16 11:16:21,102 - backend.sub_agents.youtube_insight_agent - INFO - YouTube insight agent created using simplified pattern
2025-05-16 11:16:21,102 - backend.sub_agents.youtube_insight_agent - INFO - YouTube Insight Agent module loaded
2025-05-16 11:16:21,102 - backend.sub_agents.youtube_insight_agent - INFO - YouTube API dependencies are available
2025-05-16 11:16:21,102 - backend.sub_agents.youtube_insight_agent - INFO - YouTube tools available and ready to use
2025-05-16 11:16:21,102 - backend.sub_agents.youtube_insight_agent - INFO - YouTube Configuration:
2025-05-16 11:16:21,102 - backend.sub_agents.youtube_insight_agent - INFO -   - YouTube API Key Set: True
2025-05-16 11:16:21,102 - backend.sub_agents.youtube_insight_agent - INFO -   - YouTube Tools Available: True
2025-05-16 11:16:21,102 - backend.sub_agents.youtube_insight_agent - INFO -   - Store State Tool Available: False
2025-05-16 11:16:21,102 - backend.sub_agents.youtube_insight_agent - INFO -   - Timeout Seconds: 30
2025-05-16 11:16:21,102 - backend.sub_agents.youtube_insight_agent - INFO - Testing YouTube API key...
2025-05-16 11:16:21,103 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-05-16 11:16:21,710 - backend.sub_agents.youtube_insight_agent - INFO - YouTube API key is valid and working correctly.
2025-05-16 11:16:21,710 - backend.sub_agents - INFO - Successfully imported YouTubeInsightAgent
2025-05-16 11:16:21,710 - backend.sub_agents - INFO - Imported 6 sub-agents successfully
2025-05-16 11:16:21,710 - backend.sub_agents.youtube_insight_agent - INFO - [get_youtube_insights] Getting insights for destination: ภายในประเทศไทย
2025-05-16 11:16:21,710 - backend.sub_agents.youtube_insight_agent - WARNING - [get_youtube_insights] Invalid destination: ภายในประเทศไทย
2025-05-16 11:16:21,710 - backend.sub_agents.youtube_insight_agent - INFO - Formatted YouTube insights for ภายในประเทศไทย with 606 characters
2025-05-16 11:16:21,710 - agent - INFO - ✅ SUB-AGENT RESPONSE: youtube_insight_agent
2025-05-16 11:16:21,710 - agent - INFO - 📄 youtube_insight_agent response: {"data": {"destination": "\u0e20\u0e32\u0e22\u0e43\u0e19\u0e1b\u0e23\u0e30\u0e40\u0e17\u0e28\u0e44\u0e17\u0e22", "insights": {"top_places": ["\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e23\u0e30\u0e1a\u0e38\u0e2a\u0e16\u0e32\u0e19\u0e17\u0e35\u0e48\u0e44\u0e14\u0e49"], "top_activities": ["\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e23\u0e30\u0e1a\u0e38\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e44\u0e14\u0e49"], "tips": ["\u0e42\u0e1b\u0e23\u0e14\u0e23\u0e30\u0e1a\u... [truncated]
2025-05-16 11:16:21,710 - __main__ - INFO - Sub-agent youtube_insight test completed successfully
2025-05-16 11:16:21,710 - __main__ - INFO - All sub-agent tests completed
